(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2222],{20724:function(e,t,i){"use strict";var l=i(64836);t.Z=void 0;var n=l(i(64938)),o=i(85893),a=(0,n.default)((0,o.jsx)("path",{d:"M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos");t.Z=a},60888:function(e,t,i){"use strict";var l=i(64836);t.Z=void 0;var n=l(i(64938)),o=i(85893),a=(0,n.default)((0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");t.Z=a},75058:function(e,t,i){"use strict";var l=i(64836);t.Z=void 0;var n=l(i(64938)),o=i(85893),a=(0,n.default)((0,o.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Create");t.Z=a},92173:function(e,t,i){"use strict";var l=i(64836);t.Z=void 0;var n=l(i(64938)),o=i(85893),a=(0,n.default)([(0,o.jsx)("path",{d:"M18 6.41 16.59 5 12 9.58 7.41 5 6 6.41l6 6z"},"0"),(0,o.jsx)("path",{d:"m18 13-1.41-1.41L12 16.17l-4.59-4.58L6 13l6 6z"},"1")],"KeyboardDoubleArrowDown");t.Z=a},40625:function(e,t,i){"use strict";var l=i(64836);t.Z=void 0;var n=l(i(64938)),o=i(85893),a=(0,n.default)([(0,o.jsx)("path",{d:"M6.41 6 5 7.41 9.58 12 5 16.59 6.41 18l6-6z"},"0"),(0,o.jsx)("path",{d:"m13 6-1.41 1.41L16.17 12l-4.58 4.59L13 18l6-6z"},"1")],"KeyboardDoubleArrowRight");t.Z=a},72590:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkout",function(){return i(14054)}])},14054:function(e,t,i){"use strict";i.r(t),i.d(t,{__N_SSP:function(){return tu},default:function(){return tv}});var l=i(85893),n=i(67294),o=i(57542),a=i(45269),r=i(74485),d=i(77274),s=i(79072),c=i(62097),u=i(29630),v=i(41796),h=i(22120),p=i(9473),m=i(60768),x=i(71983),g=i(51126);let j=e=>{let{title:t,name:i,phone:n,address:o}=e,r=(0,c.Z)();return(0,l.jsxs)(a.Xw,{spacing:.5,children:[(0,l.jsx)(d.Z,{width:"100%",children:(0,l.jsx)(u.Z,{fontWeight:"500",children:t})}),(0,l.jsxs)(d.Z,{width:"100%",padding:".9rem",backgroundColor:(0,v.Fq)(r.palette.primary.main,.1),borderRadius:"7px",spacing:.5,children:[(0,l.jsx)(u.Z,{children:i}),(0,l.jsxs)(d.Z,{direction:"row",spacing:1.3,alignItems:"center",children:[(0,l.jsx)(m.Z,{sx:{width:"16.5px",height:"16.5px",color:e=>e.palette.primary.main}}),(0,l.jsx)(u.Z,{fontSize:"14px",color:r.palette.neutral[500],children:n})]}),(0,l.jsxs)(d.Z,{direction:"row",spacing:1.3,alignItems:"center",children:[(0,l.jsx)(x.Z,{sx:{width:"16.5px",height:"16.5px",color:e=>e.palette.primary.main}}),(0,l.jsx)(u.Z,{fontSize:"14px",color:r.palette.neutral[500],children:o})]})]})]})};var y=i(58861);let _=e=>{var t;let{parcelInfo:i,configData:n}=e,o=(0,c.Z)(),{t:r}=(0,h.$G)();return(0,l.jsx)(a.iD,{children:(0,l.jsxs)(a.Xw,{spacing:3,children:[(0,l.jsx)(d.Z,{align:"center",children:(0,l.jsx)(u.Z,{variant:"h6",children:r("Delivery Information")})}),(0,l.jsx)(j,{title:r("Sender"),phone:null==i?void 0:i.senderPhone,name:null==i?void 0:i.senderName,address:null==i?void 0:i.senderAddress}),(0,l.jsx)(j,{title:r("Receiver"),phone:null==i?void 0:i.receiverPhone,name:null==i?void 0:i.receiverName,address:null==i?void 0:i.receiverAddress}),(0,l.jsxs)(a.Xw,{spacing:.5,children:[(0,l.jsx)(d.Z,{width:"100%",children:(0,l.jsx)(u.Z,{fontWeight:"500",children:r("Parcel Category")})}),(0,l.jsxs)(d.Z,{width:"100%",padding:"1.3rem",backgroundColor:(0,v.Fq)(o.palette.primary.main,.1),borderRadius:"7px",spacing:2,direction:"row",children:[(0,l.jsx)(y.Z,{width:"56px",height:"56px",src:"".concat(null==n?void 0:null===(t=n.base_urls)||void 0===t?void 0:t.parcel_category_image_url,"/").concat(null==i?void 0:i.image),objectfit:"contain"}),(0,l.jsxs)(d.Z,{spacing:1,children:[(0,l.jsx)(u.Z,{variant:"h6",children:null==i?void 0:i.name}),(0,l.jsx)(u.Z,{color:o.palette.neutral[500],children:null==i?void 0:i.description})]})]})]})]})})};var f={src:"/_next/static/media/image 45.43fe4b1e.svg",height:38,width:38},Z={src:"/_next/static/media/image 46.1fc067d7.svg",height:38,width:38},w=i(57412),b=i(89113),C=i(81261);let P=e=>{var t,i;let{data:n,parcelDeliveryFree:o,senderLocation:r,receiverLocation:s,configData:v}=e,h=(0,c.Z)();return(0,l.jsxs)(a.Xw,{justifyContent:"center",alignItems:"center",direction:"row",spacing:4,children:[(0,l.jsxs)(d.Z,{direction:"row",width:"100%",spacing:1.5,children:[(0,l.jsx)(y.Z,{src:f.src,width:"37px",height:"37px",objectfit:"contain"}),(0,l.jsxs)(d.Z,{children:[(0,l.jsx)(u.Z,{color:h.palette.neutral[1e3],children:(0,g.t)("Distance")}),n?(0,l.jsxs)(u.Z,{color:h.palette.primary.main,fontWeight:"600",children:[null===(t=(0,C.NY)(null===(i=null==n?void 0:n.rows[0])||void 0===i?void 0:i.elements,r,s))||void 0===t?void 0:t.toFixed(null==v?void 0:v.digit_after_decimal_point)," ","km"]}):(0,l.jsx)(w.Z,{width:50,height:20,variant:"text"})]})]}),(0,l.jsxs)(d.Z,{direction:"row",width:"100%",spacing:1.5,children:[(0,l.jsx)(y.Z,{src:Z.src,width:"37px",height:"37px",objectfit:"contain"}),(0,l.jsxs)(d.Z,{flexWrap:"wrap",children:[(0,l.jsx)(u.Z,{children:(0,g.t)("Delivery Fee")}),(0,l.jsx)(u.Z,{color:h.palette.primary.main,fontWeight:"600",children:(0,b.B9)(o())})]})]})]})};var S=i(54225),A=i(20724),D=i(66366);let I=e=>{let{deliveryTip:t,setDeliveryTip:i}=e,[o,r]=(0,n.useState)(!1),[c,v]=(0,n.useState)(t),{t:p}=(0,h.$G)(),m=e=>{e.target.value>-1&&(v(e.target.value),i(e.target.value))},x=e=>{v(e)};(0,n.useEffect)(()=>{i(c)},[c]);let g=()=>{r(!0)},j=()=>{r(!1)};return(0,l.jsx)(a.Xw,{children:(0,l.jsxs)(s.ZP,{container:!0,rowGap:"14px",children:[(0,l.jsx)(s.ZP,{item:!0,xs:12,md:12,children:(0,l.jsx)(D.E9,{children:p("Delivery Man Tips")})}),!o&&(0,l.jsx)(s.ZP,{item:!0,xs:12,children:(0,l.jsxs)(a.Xw,{direction:"row",alignItems:"center",gap:"10px",flexWrap:"wrap",children:[[0,20,30,50].map((e,t)=>(0,l.jsx)(a.m,{sx:{borderColor:t=>c===e?t.palette.primary.main:t.palette.neutral[200]},onClick:()=>x(e),children:(0,l.jsx)(u.Z,{fontSize:"14px",children:e})},t)),(0,l.jsx)(a.m,{sx:{borderColor:e=>e.palette.neutral[200]},onClick:g,children:(0,l.jsx)(u.Z,{fontSize:"14px",children:p("Others")})})]})}),o&&(0,l.jsxs)(d.Z,{width:"100%",direction:"row",spacing:1.8,children:[(0,l.jsx)(d.Z,{justifyContent:"center",alignItems:"center",children:(0,l.jsx)(S.Z,{sx:{backgroundColor:e=>e.palette.primary.main,color:e=>e.palette.neutral[100],minWidth:"35px",padding:"8px 10px",textAlign:"center","&:hover":{backgroundColor:e=>e.palette.primary.deep}},onClick:j,children:(0,l.jsx)(A.Z,{sx:{width:"15px",height:"20px"}})})}),(0,l.jsx)(a.Xw,{children:(0,l.jsx)(a.yM,{label:p("Amount"),autoFocus:!0,value:c,fullWidth:!0,onChange:e=>m(e)})})]})]})})};var k=i(77591),E={src:"/_next/static/media/senderimage.3e11cc04.svg",height:36,width:36},L={src:"/_next/static/media/receiverimage.fb1a6fb2.svg",height:36,width:36};let T=e=>{var t,i,n;let{paidBy:o,setPaidBy:r,zoneData:s}=e,h=(0,c.Z)();return(0,l.jsxs)(a.Xw,{spacing:1.1,children:[(0,l.jsx)(a.Xw,{children:(0,l.jsx)(k.ZT,{fontWeigh:"500",children:(0,g.t)("Charge Paid By")})}),(0,l.jsxs)(a.Xw,{direction:"row",spacing:4,children:[(0,l.jsxs)(d.Z,{spacing:.5,sx:{cursor:"pointer"},onClick:()=>r("sender"),children:[(0,l.jsx)(d.Z,{backgroundColor:"sender"===o&&(0,v.Fq)(h.palette.primary.main,.1),sx:{borderRadius:"15px"},padding:"14px",children:(0,l.jsx)(y.Z,{src:E.src,height:"36px",width:"36px",objectfit:"contain"})}),(0,l.jsx)(u.Z,{align:"center",children:(0,g.t)("Sender")})]}),(null==s?void 0:null===(t=s.data)||void 0===t?void 0:null===(i=t.zone_data)||void 0===i?void 0:null===(n=i[0])||void 0===n?void 0:n.cash_on_delivery)&&(0,l.jsxs)(d.Z,{spacing:.5,onClick:()=>r("receiver"),sx:{cursor:"pointer"},children:[(0,l.jsx)(d.Z,{backgroundColor:"receiver"===o&&(0,v.Fq)(h.palette.primary.main,.1),sx:{borderRadius:"15px"},padding:"14px",children:(0,l.jsx)(y.Z,{src:L.src,height:"36px",width:"36px",objectfit:"contain"})}),(0,l.jsx)(u.Z,{align:"center",children:(0,g.t)("Receiver")})]})]})]})},F=e=>{let{deliveryTip:t,setDeliveryTip:i,paidBy:n,setPaidBy:o,data:r,parcelDeliveryFree:s,zoneData:c,senderLocation:v,receiverLocation:h,configData:p}=e;return(0,l.jsx)(a.iD,{children:(0,l.jsxs)(a.Xw,{spacing:4,children:[(0,l.jsx)(d.Z,{align:"center",children:(0,l.jsx)(u.Z,{variant:"h6",children:(0,g.t)("Billing")})}),(0,l.jsx)(P,{data:r,parcelDeliveryFree:s,senderLocation:v,receiverLocation:h,configData:p}),(0,l.jsx)(I,{deliveryTip:t,setDeliveryTip:i}),(0,l.jsx)(T,{paidBy:n,setPaidBy:o,zoneData:c})]})})};var N=i(61225),R=i(49837),z=i(60888);let M=e=>{let{image:t,description:i,type:n,paymentMethod:o,setPaymentMethod:r,paymentType:d,paidBy:v}=e,h=(0,c.Z)(),p=(0,N.Z)(h.breakpoints.down("md"));return(0,l.jsx)(R.Z,{elevation:9,...e,sx:{padding:"20px",cursor:"pointer"},onClick:()=>r(n),children:(0,l.jsxs)(s.ZP,{container:!0,justifyContent:"center",alignItems:"center",spacing:{xs:1,sm:3,md:4},children:[(0,l.jsx)(s.ZP,{item:!0,xs:2,children:(0,l.jsx)(y.Z,{src:t.src,objectfit:"contain",height:v?"100%":p?"35px":"40px",width:v?"100%":p?"35px":"60px"})}),(0,l.jsx)(s.ZP,{item:!0,xs:8,children:(0,l.jsx)(a.Xw,{children:(0,l.jsx)(u.Z,{fontWeight:"500",children:(0,g.t)(d)})})}),(0,l.jsx)(s.ZP,{item:!0,xs:2,textAlign:"right",children:(0,l.jsx)(a.Xw,{children:o===n&&(0,l.jsx)(z.Z,{color:"success"})})})]})})};var W={src:"/_next/static/media/digitalpayment.c4061242.svg",height:35,width:36},B={src:"/_next/static/media/cash-on-delivery.e342573b.svg",height:35,width:36},X={src:"/_next/static/media/wallet.30b2b50d.svg",height:30,width:30},O=i(31812);let V=e=>{var t,i,o,r;let{paymentMethod:s,setPaymentMethod:c,paidBy:v,orderPlace:h,isLoading:p,zoneData:m,forprescription:x,configData:j,storeZoneId:y,prescriptionPayment:_}=e,f=()=>{if(null==j?void 0:j.cash_on_delivery){var e,t,i,l;if((null==m?void 0:null===(e=m.data)||void 0===e?void 0:null===(t=e.zone_data)||void 0===t?void 0:t.length)>0&&y)return null==m?void 0:null===(i=m.data)||void 0===i?void 0:null===(l=i.zone_data)||void 0===l?void 0:l.find(e=>(null==e?void 0:e.id)===y)}},Z=()=>{if(null==j?void 0:j.digital_payment){var e,t,i,l;if((null==m?void 0:null===(e=m.data)||void 0===e?void 0:null===(t=e.zone_data)||void 0===t?void 0:t.length)>0&&y)return null==m?void 0:null===(i=m.data)||void 0===i?void 0:null===(l=i.zone_data)||void 0===l?void 0:l.find(e=>(null==e?void 0:e.id)===y)}},w=()=>{var e,t;(null===(e=f())||void 0===e?void 0:e.cash_on_delivery)?c("cash_on_delivery"):(null===(t=Z())||void 0===t?void 0:t.digital_payment)?c("digital_payment"):c("wallet")};return(0,n.useEffect)(()=>{y&&w()},[]),(0,l.jsx)(l.Fragment,{children:_?"cash_on_delivery"===s?(0,l.jsx)(a.iD,{children:(0,l.jsxs)(a.Xw,{spacing:4,children:[(0,l.jsx)(d.Z,{align:"center",children:(0,l.jsx)(u.Z,{variant:"h6",children:(0,g.t)("Payment Method")})}),(0,l.jsxs)(a.Xw,{spacing:2,children:[(null===(t=f())||void 0===t?void 0:t.cash_on_delivery)&&(0,l.jsx)(M,{paymentType:(0,g.t)("Cash on delivery"),image:B,type:"cash_on_delivery",description:(0,g.t)("Faster and safer way to send money"),paymentMethod:s,setPaymentMethod:c,paidBy:v}),(null===(i=Z())||void 0===i?void 0:i.digital_payment)&&"receiver"!==v&&"true"!==x&&(0,l.jsx)(M,{paymentType:(0,g.t)("Digital Payment"),image:W,type:"digital_payment",description:(0,g.t)("Faster and safer way to send money"),paymentMethod:s,setPaymentMethod:c,paidBy:v}),(null==j?void 0:j.customer_wallet_status)===1&&"receiver"!==v&&"true"!==x&&(0,l.jsx)(M,{paymentType:(0,g.t)("Wallet"),image:X,type:"wallet",description:(0,g.t)("Faster and safer way to send money"),paymentMethod:s,setPaymentMethod:c,paidBy:v})]}),v&&(0,l.jsx)(a.Xw,{children:(0,l.jsx)(O.Z,{type:"submit",fullWidth:!0,variant:"contained",onClick:h,loading:p,children:(0,g.t)("Confirm Parcel Request")})})]})}):void 0:(0,l.jsx)(a.iD,{children:(0,l.jsxs)(a.Xw,{spacing:4,children:[(0,l.jsx)(d.Z,{align:"center",children:(0,l.jsx)(u.Z,{variant:"h6",children:(0,g.t)("Payment Method")})}),(0,l.jsxs)(a.Xw,{spacing:2,children:[(null===(o=f())||void 0===o?void 0:o.cash_on_delivery)&&(0,l.jsx)(M,{paymentType:(0,g.t)("Cash on delivery"),image:B,type:"cash_on_delivery",description:(0,g.t)("Faster and safer way to send money"),paymentMethod:s,setPaymentMethod:c,paidBy:v}),(null===(r=Z())||void 0===r?void 0:r.digital_payment)&&"receiver"!==v&&"true"!==x&&(0,l.jsx)(M,{paymentType:(0,g.t)("Digital Payment"),image:W,type:"digital_payment",description:(0,g.t)("Faster and safer way to send money"),paymentMethod:s,setPaymentMethod:c,paidBy:v}),(null==j?void 0:j.customer_wallet_status)===1&&"receiver"!==v&&"true"!==x&&(0,l.jsx)(M,{paymentType:(0,g.t)("Wallet"),image:X,type:"wallet",description:(0,g.t)("Faster and safer way to send money"),paymentMethod:s,setPaymentMethod:c,paidBy:v})]}),v&&(0,l.jsx)(a.Xw,{children:(0,l.jsx)(O.Z,{type:"submit",fullWidth:!0,variant:"contained",onClick:h,loading:p,children:(0,g.t)("Confirm Parcel Request")})})]})})})};var q=n.memo(V),H=i(88767),Q=i(60274),G=i(67759),U=i(61176);let Y=async(e,t)=>{let{data:i}=await U.Z.get("".concat(Q.N5,"?origin_lat=").concat(null==e?void 0:e.lat,"&origin_lng=").concat(null==e?void 0:e.lng,"&destination_lat=").concat(t.lat?t.lat:null==t?void 0:t.latitude,"&destination_lng=").concat(t.lng?t.lng:null==t?void 0:t.longitude,"&mode=walking"));return i},J=async e=>{let{data:t}=await U.Z.post("".concat(Q.jv),e);return t},K=()=>(0,H.useMutation)("order-place",J);var $=i(86501),ee=i(11163),et=i.n(ee),ei=i(55496);let el=async e=>{let{tempDistance:t}=e,{data:i}=await U.Z.get("/api/v1/vehicle/extra_charge?distance=".concat(t));return i};function en(e){return(0,H.useQuery)("vehicle",()=>el(e),{enabled:!1,onError:G.f})}let eo=()=>{var e,t,i,o,c,u,v,h,m,x,j,y;let{configData:f}=(0,p.v9)(e=>e.configData),{parcelInfo:Z}=(0,p.v9)(e=>e.parcelInfoData),{profileInfo:w}=(0,p.v9)(e=>e.profileInfo),[b,P]=(0,n.useState)(void 0),[S,A]=(0,n.useState)(0),[D,I]=(0,n.useState)(null),[k,E]=(0,n.useState)("sender"),{parcelCategories:L}=(0,p.v9)(e=>e.parcelCategories),T=(0,ee.useRouter)(),[N,R]=(0,n.useState)(!0),[z,M]=(0,n.useState)(null),W={lat:null==Z?void 0:null===(e=Z.receiverLocations)||void 0===e?void 0:e.lat,lng:null==Z?void 0:null===(t=Z.receiverLocations)||void 0===t?void 0:t.lng},{data:B}=(0,ei.Z)(W,N),{data:X,refetch:O}=(j=null==Z?void 0:Z.senderLocations,y=null==Z?void 0:Z.receiverLocations,(0,H.useQuery)(["distance",j,y],()=>Y(j,y),{enabled:!1,onError:G.f})),V=(0,C.NY)(null==X?void 0:null===(i=X.data)||void 0===i?void 0:null===(o=i.rows)||void 0===o?void 0:null===(c=o[0])||void 0===c?void 0:c.elements,{latitude:null==Z?void 0:null===(u=Z.receiverLocations)||void 0===u?void 0:u.latitude,longitude:null==Z?void 0:null===(v=Z.receiverLocations)||void 0===v?void 0:v.longitude},b),{data:Q,isLoading:J,refetch:et}=en({tempDistance:V});(0,n.useEffect)(()=>{X&&et()},[X]),(0,n.useEffect)(()=>{O()},[Z]),(0,n.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("currentLatLng")),t=localStorage.getItem("location"),i=JSON.parse(localStorage.getItem("zoneid"));M(null==i?void 0:i[0]),P({...e,latitude:null==e?void 0:e.lat,longitude:null==e?void 0:e.lng,address:t,address_type:"Selected Address"})},[]);let el=()=>{var e;let t=(0,C.NY)(null===(e=null==X?void 0:X.rows[0])||void 0===e?void 0:e.elements,null==Z?void 0:Z.senderLocations,null==Z?void 0:Z.receiverLocations);if(null==L?void 0:L.parcel_per_km_shipping_charge){let i=t*(null==L?void 0:L.parcel_per_km_shipping_charge);return i>(null==L?void 0:L.parcel_minimum_shipping_charge)?i+Q:(null==L?void 0:L.parcel_minimum_shipping_charge)+Q}{let l=t*(null==f?void 0:f.parcel_per_km_shipping_charge);return l>(null==f?void 0:f.parcel_minimum_shipping_charge)?l+Q:(null==f?void 0:f.parcel_minimum_shipping_charge)+Q}},eo=JSON.stringify({id:null,address_type:"others",contact_person_number:null==Z?void 0:Z.receiverPhone,address:null==Z?void 0:Z.receiverAddress,additional_address:null,latitude:null==Z?void 0:null===(h=Z.receiverLocations)||void 0===h?void 0:h.lat,longitude:null==Z?void 0:null===(m=Z.receiverLocations)||void 0===m?void 0:m.lng,zone_id:null==B?void 0:B.zone_id[1],zone_ids:null,_method:null,contact_person_name:null==Z?void 0:Z.receiverName,road:null==Z?void 0:Z.road,house:null==Z?void 0:Z.house,floor:null==Z?void 0:Z.floor}),ea={...b,cart:[],order_amount:el()+Number(S),order_type:"parcel",payment_method:D,distance:(0,C.NY)(null===(x=null==X?void 0:X.rows[0])||void 0===x?void 0:x.elements,null==Z?void 0:Z.senderLocations,null==Z?void 0:Z.receiverLocations),discount_amount:0,tax_amount:0,receiver_details:eo,parcel_category_id:null==L?void 0:L.id,charge_payer:k,dm_tips:S},{data:er,isLoading:ed,mutate:es}=K(),ec=()=>{if("sender"===k){let e=e=>{if(e){if("digital_payment"===D){localStorage.setItem("totalAmount",null==e?void 0:e.total_ammount);let t="".concat(window.location.origin,"/order?order_id=").concat(null==e?void 0:e.order_id,"&total=").concat(null==e?void 0:e.total_ammount),i="".concat(U.F,"/payment-mobile?order_id=").concat(null==e?void 0:e.order_id,"&customer_id=").concat(null==w?void 0:w.id,"&callback=").concat(t);T.push(i,void 0,{shallow:!0})}else"wallet"===D&&Number(null==w?void 0:w.wallet_balance)<Number(el())?$.ZP.error((0,g.t)("Wallet balance is below total amount."),{id:"wallet",position:"bottom-right"}):($.ZP.success(null==e?void 0:e.message),T.push({pathname:"/order",query:{order_id:null==e?void 0:e.order_id,total:null==e?void 0:e.total_ammount}},void 0,{shallow:!0}))}};es(ea,{onSuccess:e,onError(e){var t,i,l;null==e||null===(t=e.response)||void 0===t||null===(i=t.data)||void 0===i||null===(l=i.errors)||void 0===l||l.forEach(e=>$.ZP.error(e.message,{position:"bottom-right"}))}})}else if("cash_on_delivery"===D){let t=e=>{if(e){if("digital_payment"===D){localStorage.setItem("totalAmount",null==e?void 0:e.total_ammount);let t="".concat(window.location.origin,"/order?order_id=").concat(null==e?void 0:e.order_id,"&total=").concat(null==e?void 0:e.total_ammount),i="".concat(U.F,"/payment-mobile?order_id=").concat(null==e?void 0:e.order_id,"&customer_id=").concat(null==w?void 0:w.id,"&callback=").concat(t);T.push(i,void 0,{shallow:!0})}else"wallet"===D&&Number(null==w?void 0:w.wallet_balance)<Number(el())?$.ZP.error((0,g.t)("Wallet balance is below total amount."),{id:"wallet",position:"bottom-right"}):($.ZP.success(null==e?void 0:e.message),T.push({pathname:"/order",query:{order_id:null==e?void 0:e.order_id,total:null==e?void 0:e.total_ammount}},void 0,{shallow:!0}))}};es(ea,{onSuccess:t,onError(e){var t,i,l;null==e||null===(t=e.response)||void 0===t||null===(i=t.data)||void 0===i||null===(l=i.errors)||void 0===l||l.forEach(e=>$.ZP.error(e.message,{position:"bottom-right"}))}})}else $.ZP.error((0,g.t)("Without any payment method, you can not place the order."))};return(0,l.jsxs)(a.Xw,{paddingBottom:{sm:"20px",md:"80px"},children:[(0,l.jsx)(d.Z,{paddingBottom:"20px",children:(0,l.jsx)(r.Z,{text:"Checkout"})}),(0,l.jsx)(a.Xw,{children:(0,l.jsxs)(s.ZP,{container:!0,spacing:4,children:[(0,l.jsx)(s.ZP,{item:!0,xs:12,sm:12,md:4,children:(0,l.jsx)(_,{configData:f,parcelInfo:Z,parcelCategories:L})}),(0,l.jsx)(s.ZP,{item:!0,xs:12,sm:12,md:4,children:(0,l.jsx)(F,{deliveryTip:S,setDeliveryTip:A,paidBy:k,setPaidBy:E,data:X,parcelDeliveryFree:el,zoneData:{data:B},senderLocation:null==Z?void 0:Z.senderLocations,receiverLocation:null==Z?void 0:Z.receiverLocations,configData:f})}),(0,l.jsx)(s.ZP,{item:!0,xs:12,sm:12,md:4,children:!!z&&B&&(0,l.jsx)(q,{setPaymentMethod:I,paymentMethod:D,paidBy:k,isLoading:ed,orderPlace:ec,zoneData:{data:B},configData:f,storeZoneId:z})})]})})]})};var ea=n.memo(eo),er=i(40793),ed=i(74121),es=i(46941),ec=i(55343),eu=i(41470),ev=i(22841),eh=i(8519),ep=i(96219);let em=e=>{let{storeData:t,setOrderType:i,orderType:n,setAddress:o,address:r,configData:d,forprescription:s,setDeliveryTip:c}=e,{t:u}=(0,h.$G)(),v=e=>{"take_away"===e&&c(0),i(e)};return(0,l.jsxs)(a.iD,{children:[(0,l.jsx)(D.UE,{children:u("DELIVERY DETAILS")}),(0,l.jsxs)(ec.Z,{children:[(0,l.jsx)(D.qv,{const:!0,id:"demo-row-radio-buttons-group-label",children:u("Delivery Options")}),t&&(0,l.jsxs)(eu.Z,{value:n,row:!0,onChange:e=>null==v?void 0:v(e.target.value),children:[(null==t?void 0:t.delivery)&&(null==d?void 0:d.home_delivery_status)===1&&(0,l.jsx)(ev.Z,{value:"delivery",control:(0,l.jsx)(eh.Z,{}),label:u("Home Delivery")}),(null==t?void 0:t.take_away)&&(null==d?void 0:d.takeaway_status)===1&&"true"!==s&&(0,l.jsx)(ev.Z,{value:"take_away",control:(0,l.jsx)(eh.Z,{}),label:u("Take Away")})]})]}),"delivery"===n&&(0,l.jsx)(ep.Z,{setAddress:o,address:r,configData:d,storeZoneId:null==t?void 0:t.zone_id})]})};em.propTypes={};let ex=async e=>{let{data:t}=await U.Z.get("".concat(Q.HR,"/").concat(e));return t};function eg(e){return(0,H.useQuery)("store-details",()=>ex(e),{enabled:!1,onError:G.f})}var ej=i(12212),ey=i(91326),e_=i(67019);let ef={profileInfo:()=>U.Z.get("/api/v1/customer/info"),profileUpdate:e=>U.Z.post("/api/v1/customer/update-profile",e)};var eZ=i(58316),ew=i(53442),eb=i(31538),eC=i(67836),eP=i(51195);let eS=e=>{var t;let{storeData:i,handleChange:n,today:o,tomorrow:r,numberOfDay:d,configData:c,setScheduleAt:u}=e,{t:v}=(0,h.$G)(),p=(null==c?void 0:c.schedule_order_slot_duration)===0?30:null==c?void 0:c.schedule_order_slot_duration;return(0,l.jsx)(l.Fragment,{children:(null==i?void 0:i.schedule_order)&&(0,l.jsx)(a.iD,{children:(0,l.jsxs)(s.ZP,{container:!0,spacing:3,children:[(0,l.jsx)(s.ZP,{item:!0,xs:12,md:12,children:(0,l.jsx)(a.n2,{children:v("Preferable Time")})}),(0,l.jsx)(s.ZP,{item:!0,md:6,xs:12,children:(0,l.jsxs)(ec.Z,{fullWidth:!0,children:[(0,l.jsx)(eZ.Z,{children:v("Time")}),(0,l.jsxs)(ew.Z,{label:v("Time"),onChange:n,defaultValue:(0,C.Tw)(o),children:[(0,l.jsx)(eb.Z,{value:(0,C.Tw)(o),sx:{"&:hover":{backgroundColor:"primary.main"}},children:v("Today")}),(0,l.jsx)(eb.Z,{value:(0,C.Tw)(r),sx:{"&:hover":{backgroundColor:"primary.main"}},children:v("Tomorrow")})]})]})}),0!==(0,C.hU)(d,null==i?void 0:i.schedules,p).length&&(0,l.jsx)(s.ZP,{item:!0,md:6,xs:12,children:(null==i?void 0:i.schedules)&&(null==i?void 0:null===(t=i.schedules)||void 0===t?void 0:t.length)>0&&(0,l.jsx)(D.cE,{defaultValue:(0,C.Tw)(o)===d?v("Now"):"",disablePortal:!0,id:"combo-box-demo",options:(0,C.hU)(d,null==i?void 0:i.schedules,p),onChange:(e,t)=>u(null==t?void 0:t.value),renderInput:e=>(0,l.jsx)(eC.Z,{...e,label:v("Schedule")})},d)}),0===(0,C.hU)(d,null==i?void 0:i.schedules,p).length&&(0,l.jsx)(s.ZP,{item:!0,xs:12,children:(0,l.jsx)(eP.Z,{type:"info",text:"Store closed."})})]})})})};eS.propTypes={};var eA=i(81674);let eD={couponList:()=>U.Z.get("/api/v1/coupon/list"),applyCoupon:(e,t)=>U.Z.get("/api/v1/coupon/apply?code=".concat(e,"&store_id=").concat(t))};var eI=i(65337),ek=i(70557);let eE=e=>{let t,{store_id:i,setCouponDiscount:o,couponDiscount:r,totalAmount:d,deliveryFee:u,deliveryTip:v}=e,m=(0,c.Z)(),{couponInfo:x}=(0,p.v9)(e=>e.profileInfo),[g,j]=(0,n.useState)(null==x?void 0:x.code),{t:y}=(0,h.$G)(),_=(0,p.I0)();t=JSON.parse(localStorage.getItem("zoneid"));let f=e=>{var i,l;Number.parseInt(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.min_purchase)<=Number.parseInt(d-u-v)?(_((0,eI.Ey)(e.data)),$.Am.success(y("Coupon Applied")),_((0,eI.R4)(e.data.coupon_type)),o({...e.data,zoneId:t})):$.Am.error("".concat(y(ek.E0)," ").concat((0,b.B9)(null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.min_purchase)))},{isLoading:Z,refetch:w}=(0,H.useQuery)("apply-coupon",()=>eD.applyCoupon(g,i),{onSuccess:f,onError:G.R,enabled:!1,retry:1});(0,n.useEffect)(()=>()=>{_((0,eI.Ey)(null))},[]);let C=()=>{localStorage.removeItem("coupon"),j(null),_((0,eI.Ey)(null))},P=async()=>{await w()},S=m.palette.primary.main;return(0,l.jsx)(a.iD,{children:(0,l.jsxs)(s.ZP,{container:!0,spacing:{xs:1,md:1},justifyContent:"flex-start",children:[(0,l.jsx)(s.ZP,{item:!0,md:12,xs:12,children:(0,l.jsx)(D.E9,{children:y("Have a Coupon?")})}),(0,l.jsx)(s.ZP,{item:!0,md:6,xs:12,sm:7,children:(0,l.jsx)(D.UP,{variant:"outlined",sx:{height:"100%",border:".5px solid ".concat(S)},children:(0,l.jsx)(eA.ZP,{placeholder:y("Enter Your Coupon.."),sx:{ml:1,flex:1,width:"100%",padding:"5px 10px 5px",[m.breakpoints.down("sm")]:{fontSize:"12px"}},onChange:e=>j(e.target.value),value:g||"",onKeyPress(e){"Enter"===e.key&&P()}})})}),(0,l.jsxs)(s.ZP,{item:!0,md:3,xs:12,sm:5,children:[!x&&(0,l.jsx)(D.ol,{loading:Z,loadingPosition:"start",variant:"contained",onClick:P,disabled:""===g||!g,children:y("Apply Now")}),x&&(0,l.jsx)(D.ol,{loadingPosition:"start",variant:"contained",onClick:C,children:y("Remove")})]})]})})};var eL=i(40077);i(73782);var eT=i(30072);let eF=e=>{var t;let{configData:i,campaignItemList:n,t:o}=e,a=null==i?void 0:null===(t=i.base_urls)||void 0===t?void 0:t.campaign_image_url;return(0,l.jsx)(l.Fragment,{children:n.map(e=>(0,l.jsxs)(s.ZP,{container:!0,md:12,xs:12,spacing:{xs:1},children:[(0,l.jsx)(s.ZP,{item:!0,md:4,xs:4,children:(0,l.jsx)(y.Z,{height:"90px",width:"90px",src:"".concat(a,"/").concat(null==e?void 0:e.image),loading:"lazy",borderRadius:"10px"})}),(0,l.jsxs)(s.ZP,{item:!0,md:8,xs:8,children:[(0,l.jsx)(D.bv,{children:null==e?void 0:e.name}),(0,l.jsxs)(D.VK,{children:[o("Qty")," : ",null==e?void 0:e.quantity]}),(0,l.jsx)(D.VZ,{children:(0,b.B9)(null==e?void 0:e.price)})]})]},null==e?void 0:e.id))})};eF.propTypes={},i(48394);let eN=e=>{let{page:t,configData:i,cartList:n,t:o,campaignItemListz:a}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(s.ZP,{item:!0,md:12,xs:12,container:!0,spacing:1,mt:"10px",pl:"10px",children:[("cart"===t||"buy_now"===t)&&(0,l.jsx)(eT.Z,{configData:i,cartList:n,t:o}),"campaign"===t&&(0,l.jsx)(eF,{configData:i,campaignItemList:campaignItemList,t:o})]})})};eN.propTypes={};let eR=()=>(0,l.jsxs)(a.Xw,{spacing:1,children:[(0,l.jsxs)(a.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,l.jsx)(w.Z,{variant:"text",width:"50px"}),(0,l.jsx)(w.Z,{variant:"text",width:"50px"})]}),(0,l.jsxs)(a.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,l.jsx)(w.Z,{variant:"text",width:"50px"}),(0,l.jsx)(w.Z,{variant:"text",width:"50px"})]}),(0,l.jsxs)(a.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,l.jsx)(w.Z,{variant:"text",width:"50px"}),(0,l.jsx)(w.Z,{variant:"text",width:"50px"})]}),(0,l.jsxs)(a.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,l.jsx)(w.Z,{variant:"text",width:"50px"}),(0,l.jsx)(w.Z,{variant:"text",width:"50px"})]})]});var ez=i(9144),eM=i(35740),eW=i(23614);let eB=e=>{let t,i,o;let{cartList:a,storeData:r,couponDiscount:d,taxAmount:v,distanceData:m,total_order_amount:x,configData:g,orderType:j,couponInfo:y,deliveryTip:_,origin:f,destination:Z,zoneData:w,setDeliveryFee:P,extraCharge:S,extraChargeLoading:A}=e,{t:I}=(0,h.$G)(),[k,E]=(0,n.useState)("false"),L=(0,c.Z)(),T="coupon",F=(0,p.I0)(),N=(0,C.BH)(a,r);return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(D.M0,{container:!0,item:!0,md:12,xs:12,spacing:1,children:[(0,l.jsx)(s.ZP,{item:!0,md:8,xs:8,children:I(a.length>1?"Items Price":"Item Price")}),(0,l.jsx)(s.ZP,{item:!0,md:4,xs:4,align:"right",children:(0,l.jsx)(u.Z,{fontWeight:"bold",align:"right",children:(0,b.B9)((0,C.P)(a))})}),(0,l.jsx)(s.ZP,{item:!0,md:8,xs:8,children:I("Discount")}),(0,l.jsx)(s.ZP,{item:!0,md:4,xs:4,align:"right",children:(0,l.jsxs)(ez.Z,{width:"100%",direction:"row",alignItems:"center",justifyContent:"flex-end",spacing:.5,children:[(0,l.jsx)(u.Z,{fontWeight:"bold",children:"(-)"}),(0,l.jsx)(u.Z,{fontWeight:"bold",children:r?(0,b.B9)(N):null})]})}),d?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.ZP,{item:!0,md:8,xs:8,children:I("Coupon Discount")}),(0,l.jsx)(s.ZP,{item:!0,md:4,xs:4,align:"right",children:"free_delivery"===d.coupon_type?(0,l.jsx)(u.Z,{fontWeight:"bold",children:I("Free Delivery")}):(0,l.jsxs)(ez.Z,{direction:"row",alignItems:"center",justifyContent:"flex-end",spacing:.5,children:[(0,l.jsx)(u.Z,{fontWeight:"bold",children:"(-)"}),(0,l.jsx)(u.Z,{fontWeight:"bold",children:r&&a&&(t=(0,C.x7)(d,r,a),d&&"free_delivery"===d.coupon_type?(E("true"),0):(0,b.B9)(t))})]})})]}):null,r&&(null==r?void 0:r.tax)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(s.ZP,{item:!0,md:8,xs:8,children:[I("TAX")," (",null==r?void 0:r.tax,"%"," ",(null==g?void 0:g.tax_included)===1&&I("Included"),")"]}),(0,l.jsx)(s.ZP,{item:!0,md:4,xs:4,align:"right",children:(0,l.jsxs)(ez.Z,{direction:"row",alignItems:"center",justifyContent:"flex-end",spacing:.5,children:[(null==g?void 0:g.tax_included)===0&&(0,l.jsx)(u.Z,{fontWeight:"bold",children:"(+)"}),(0,l.jsx)(u.Z,{fontWeight:"bold",children:r&&(0,b.B9)((0,C.be)(a,d,r))})]})})]}):null,"delivery"===j&&1===Number.parseInt(null==g?void 0:g.dm_tips_status)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.ZP,{item:!0,md:8,xs:8,children:I("Deliveryman tips")}),(0,l.jsx)(s.ZP,{item:!0,md:4,xs:4,align:"right",children:(0,l.jsxs)(ez.Z,{direction:"row",alignItems:"center",justifyContent:"flex-end",spacing:.5,children:[(0,l.jsx)(u.Z,{fontWeight:"bold",children:"(+)"}),(0,l.jsx)(u.Z,{fontWeight:"bold",children:(0,b.B9)(_)})]})})]}):null,"delivery"===j?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.ZP,{item:!0,md:8,xs:8,children:I("Delivery fee")}),(0,l.jsx)(s.ZP,{item:!0,md:4,xs:4,align:"right",children:d&&(null==d?void 0:d.coupon_type)==="free_delivery"?(0,l.jsx)(u.Z,{fontWeight:"bold",children:I("Free")}):r&&(o=(0,C.WT)(r,g,a,null==m?void 0:m.data,d,T,j,w,f,Z,S),(P("delivery"===j?0:o),0===o)?(0,l.jsx)(u.Z,{fontWeight:"bold",children:I("Free")}):(0,l.jsxs)(ez.Z,{direction:"row",alignItems:"center",justifyContent:"flex-end",spacing:.5,width:"100%",children:[(0,l.jsx)(u.Z,{fontWeight:"bold",children:"(+)"}),(0,l.jsx)(u.Z,{fontWeight:"bold",children:r&&(0,b.B9)(o)})]}))})]}):null,(0,l.jsx)(eM.Z,{}),(0,l.jsxs)(D.v5,{container:!0,md:12,xs:12,mt:"1rem",children:[(0,l.jsx)(s.ZP,{item:!0,md:8,xs:8,pl:".5rem",children:(0,l.jsx)(u.Z,{fontWeight:"bold",color:L.palette.primary.main,children:I("Total")})}),(0,l.jsx)(s.ZP,{item:!0,md:4,xs:4,align:"right",children:(0,l.jsx)(u.Z,{color:L.palette.primary.main,align:"right",children:r&&a&&(i=(0,C.r7)(a,d,r,g,m,T,j,k,Number(_),w,f,Z,S),F((0,eW.O$)(i)),(0,b.B9)(i))})})]})]})})};eB.propTypes={};var eX=i(22416),eO=i(75158),eV=i(41664),eq=i.n(eV);let eH=e=>{let{placeOrder:t,orderLoading:i,zoneData:o,orderType:r}=e,{t:d}=(0,h.$G)(),[s,c]=(0,n.useState)(!1),u=e=>{c(e.target.checked)};return(0,l.jsx)(a.iD,{children:(0,l.jsxs)(a.Xw,{alignItems:"center",spacing:2,children:[(0,l.jsx)(eX.Z,{children:(0,l.jsx)(ev.Z,{control:(0,l.jsx)(eO.Z,{checked:s,onChange:u}),label:(0,l.jsxs)(k.ZT,{children:[d("I agree that placing the order places me under")," ",(0,l.jsx)(eq(),{href:"/terms-and-conditions",style:{textDecoration:"underline"},children:d("Terms and Conditions")})," ",d("&"),(0,l.jsxs)(eq(),{href:"/privacy-policy",style:{textDecoration:"underline"},children:[" ",d("Privacy Policy")]})]})})}),(0,l.jsx)(O.Z,{type:"submit",fullWidth:!0,variant:"contained",onClick:t,loading:i,disabled:!s,children:d("Place Order")})]})})};eH.propTypes={};var eQ=i(90603),eG=i(57790),eU=i(39626),eY={src:"/_next/static/media/add-image.06b57ae7.png",height:200,width:200,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAQAAABuBnYAAAAAYElEQVR42l3DMQqCAAAAwEtDaW7sAQ2OfaE1ghqilkAEwQf4BCcX0dHN0Xf4F5+ho3hwHMBRsA6ByN1GrDV7eCr8RPA2Ojv56lwhdDMovWQSuGj0JrVKAoHU30cqF9tbAA/NDNMzGIP4AAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8};let eJ=e=>{let{t,handleImageUpload:i}=e,[o,r]=(0,n.useState)(eY.src);(0,n.useEffect)(()=>{"string"!=typeof o&&(null==i||i(o))},[o]);let s=e=>{r(e.currentTarget.files[0])},c=e=>{r(e)};return(0,l.jsxs)(a.Xw,{alignItems:"center",justifyContent:"center",spacing:3,children:[(0,l.jsxs)(u.Z,{variant:"h6",children:[t("Prescription")," ",(0,l.jsxs)("span",{style:{color:"red",fontSize:"14px"},children:["(",t("Max size 2MB"),")"]})," "]}),(0,l.jsxs)(d.Z,{alignItems:"center",justifyContent:"center",sx:{position:"relative"},children:[(0,l.jsx)(eG.Z,{type:"file",labelText:t("file Upload"),hintText:"Image format - jpg, png, jpeg, gif Image Size - maximum size 2 MB Image Ratio - 1:1",file:o,onChange:s,imageOnChange:c,width:"10rem",borderRadius:"50%",height:"140px"}),"string"!=typeof o&&(0,l.jsx)(eU.Z,{imageChangeHandler:s})]})]})};eJ.propTypes={};var eK=i(37698),e$=i(30381),e0=i.n(e$);let e1=()=>{let e=(0,c.Z)(),t=e.palette.primary.main;return(0,l.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"M2 18V7.725C1.45 7.725 0.979167 7.52917 0.5875 7.1375C0.195833 6.74583 0 6.275 0 5.725V0.575C0 0.425 0.0583333 0.291667 0.175 0.175C0.291667 0.0583333 0.425 0 0.575 0C0.725 0 0.8625 0.0583333 0.9875 0.175C1.1125 0.291667 1.175 0.425 1.175 0.575V4.125H2.175V0.575C2.175 0.425 2.23333 0.291667 2.35 0.175C2.46667 0.0583333 2.6 0 2.75 0C2.9 0 3.03333 0.0583333 3.15 0.175C3.26667 0.291667 3.325 0.425 3.325 0.575V4.125H4.325V0.575C4.325 0.425 4.3875 0.291667 4.5125 0.175C4.6375 0.0583333 4.775 0 4.925 0C5.075 0 5.20833 0.0583333 5.325 0.175C5.44167 0.291667 5.5 0.425 5.5 0.575V5.725C5.5 6.275 5.30417 6.74583 4.9125 7.1375C4.52083 7.52917 4.05 7.725 3.5 7.725V18H2ZM9 18V7.675C8.31667 7.29167 7.8 6.775 7.45 6.125C7.1 5.475 6.925 4.725 6.925 3.875C6.925 2.875 7.17917 1.97917 7.6875 1.1875C8.19583 0.395833 8.89167 0 9.775 0C10.6583 0 11.3542 0.395833 11.8625 1.1875C12.3708 1.97917 12.625 2.875 12.625 3.875C12.625 4.725 12.4417 5.475 12.075 6.125C11.7083 6.775 11.1833 7.29167 10.5 7.675V18H9ZM14.35 18V0C15.3167 0.0833333 16.1667 0.4625 16.9 1.1375C17.6333 1.8125 18 2.65 18 3.65V9.75H15.85V18H14.35Z",fill:t})})};var e5=i(53523);let e2=e=>{let{isChecked:t,handleChange:i}=e,[o,r]=(0,n.useState)(t),{t:s}=(0,h.$G)(),c=e=>{r(e.target.checked),null==i||i(e.target.checked)};return(0,l.jsxs)(a.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",p:"5px",spacing:.5,children:[(0,l.jsxs)(a.Xw,{direction:"row",alignItems:"center",spacing:2,children:[(0,l.jsx)(e1,{}),(0,l.jsxs)(d.Z,{alignItems:"flex-start",spacing:.5,children:[(0,l.jsx)(u.Z,{color:"primary",fontWeight:"bold",children:s("Add Cutlery")}),(0,l.jsx)(u.Z,{color:"text.secondary",variant:"body2",children:s("Dont have a cutlery? Restaurant will provide you.")})]})]}),(0,l.jsx)(e5.w8,{checked:o,onChange:c,noimage:"true"})]})};e2.propTypes={};var e3=i(19117),e7=i(9942),e6=i(40625),e4=i(92173),e8=i(21448);let e9=e=>{let{title:t,data:i,handleChange:o}=e,[r,d]=n.useState(null),[s,c]=(0,n.useState)(null),{t:u}=(0,h.$G)(),v=Boolean(r),p=e=>{d(e.currentTarget)},m=()=>{d(null)},x=e=>{c(e),d(null),null==o||o(e)},g=()=>{c(null),null==o||o(null)};return(0,l.jsxs)(a.uu,{children:[(0,l.jsxs)(S.Z,{id:"fade-button","aria-controls":v?"fade-menu":void 0,"aria-haspopup":"true","aria-expanded":v?"true":void 0,onClick:p,fullWidth:!0,sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u(t),v?(0,l.jsx)(e4.Z,{}):(0,l.jsx)(e6.Z,{})]}),(null==i?void 0:i.length)>0&&(0,l.jsx)(e3.Z,{id:"fade-menu",MenuListProps:{"aria-labelledby":"fade-button"},anchorEl:r,open:v,onClose:m,TransitionComponent:e7.Z,children:null==i?void 0:i.map((e,t)=>(0,l.jsx)(eb.Z,{onClick:()=>x(e),children:u(e)},t))}),s&&(0,l.jsx)(e8.Z,{sx:{mt:"10px",ml:"15px"},label:u(s),onDelete:g})]})},te=["Remove it form my cart","I will wait until it is restocked","Please cancel the order","Call me ASAP","Notify me when it is back"],tt=["Deliver to the front door","Deliver to the reception desk","Avoid calling phone","Come with no sound"],ti=e=>{var t,i,o,r,c;let{configData:u,router:v,page:m,cartList:x,campaignItemList:g,totalAmount:j}=e,[y,_]=(0,n.useState)(null),[f,Z]=(0,n.useState)(void 0),{couponInfo:w}=(0,p.v9)(e=>e.profileInfo),[b,P]=(0,n.useState)("cash_on_delivery"),[S,A]=(0,n.useState)((0,C.Tw)(ej.Lg)),[k,E]=(0,n.useState)(null),[L,T]=(0,n.useState)("now"),[F,N]=(0,n.useState)(!1),[R,z]=(0,n.useState)(0),[M,W]=(0,n.useState)(0),[B,X]=(0,n.useState)(null),[O,V]=(0,n.useState)(null),[Q,Y]=(0,n.useState)(0),[J,K]=(0,n.useState)(null!=x&&!!x.length),[ee,ei]=(0,n.useState)(0),[el,eo]=(0,n.useState)(0),[ea,er]=(0,n.useState)([]),ed=(0,p.I0)(),{t:es}=(0,h.$G)(),ec=(0,eQ.X)(),eu="campaign"===m?null==g?void 0:null===(t=g[0])||void 0===t?void 0:t.store_id:null==x?void 0:null===(i=x[0])||void 0===i?void 0:i.store_id,{data:ev,refetch:eh}=eg(eu),ep=()=>{let e=JSON.parse(localStorage.getItem("currentLatLng")),t=localStorage.getItem("location");Z({...e,latitude:null==e?void 0:e.lat,longitude:null==e?void 0:e.lng,address:t,address_type:"Selected Address"})},ex=JSON.parse(window.localStorage.getItem("currentLatLng")),{data:eZ}=(0,H.useQuery)(["zoneId",location],async()=>ey.K.getZoneId(ex),{retry:1}),{data:ew,refetch:eb}=(0,H.useQuery)(["get-distance",ev,f],()=>ey.K.distanceApi(ev,f),{enabled:!1,onError:G.R}),eC=(0,C.NY)(null==ew?void 0:null===(o=ew.data)||void 0===o?void 0:null===(r=o.rows)||void 0===r?void 0:null===(c=r[0])||void 0===c?void 0:c.elements,{latitude:null==ev?void 0:ev.latitude,longitude:null==ev?void 0:ev.longitude},f),{data:eP,isLoading:eA,refetch:eD}=en({tempDistance:eC});(0,n.useEffect)(()=>{ew&&eD()},[ew]);let eI=e=>{A(e.target.value)},{mutate:eT,isLoading:eF}=(0,H.useMutation)("order-place",e_.R.placeOrder),ez=e=>{},{isLoading:eM,data:eX}=(0,H.useQuery)(["profile-info"],ef.profileInfo,{onSuccess:ez,onError:G.f});(0,n.useEffect)(()=>{ep(),eh()},[eu]),(0,n.useEffect)(()=>{ev&&f&&eb(),eO()},[ev,f]),(0,n.useEffect)(()=>{let e=(0,C.be)(x,k,null==ev?void 0:ev.tax,ev);z(e)},[x,k,ev]),(0,n.useEffect)(()=>{let e=(0,C.vZ)(x,k,R,ev);Y(e)},[x,k,R]);let eO=()=>{(null==ev?void 0:ev.delivery)&&(null==u?void 0:u.home_delivery_status)===1&&(null==ev?void 0:ev.take_away)&&(null==u?void 0:u.takeaway_status)===1?_("delivery"):(null==ev?void 0:ev.take_away)&&(null==u?void 0:u.takeaway_status)===1?_("take_away"):(null==ev?void 0:ev.delivery)&&(null==u?void 0:u.home_delivery_status)===1&&_("delivery")},eV=e=>{let t=[];return(null==e?void 0:e.length)>0?null==e||e.forEach(e=>{(null==e?void 0:e.isSelected)&&t.push(e.label)}):t.push(e[0].label),t},eq=(e,t)=>null==e?void 0:e.map(e=>{var i,l,n,o,a,r,d,s,c;return{add_on_ids:(null==e?void 0:null===(i=e.selectedAddons)||void 0===i?void 0:i.length)>0?null==e?void 0:null===(l=e.selectedAddons)||void 0===l?void 0:l.map(e=>e.id):[],add_on_qtys:(null==e?void 0:null===(n=e.selectedAddons)||void 0===n?void 0:n.length)>0?null==e?void 0:null===(o=e.selectedAddons)||void 0===o?void 0:o.map(e=>t+=e.quantity):[],add_ons:(null==e?void 0:null===(a=e.selectedAddons)||void 0===a?void 0:a.length)>0?null==e?void 0:null===(r=e.selectedAddons)||void 0===r?void 0:r.map(e=>({id:e.id,name:e.name,price:e.price})):[],item_id:(null==e?void 0:e.available_date_starts)?null:null==e?void 0:e.id,item_campaign_id:(null==e?void 0:e.available_date_starts)?null==e?void 0:e.id:null,price:null==e?void 0:e.price,quantity:null==e?void 0:e.quantity,variant:(null==e?void 0:e.module_type)==="food"?(0,C.KF)(null==e?void 0:e.variation):[],variation:(null==e?void 0:e.module_type)==="food"?(null==e?void 0:null===(d=e.food_variations)||void 0===d?void 0:d.length)>0?null==e?void 0:null===(s=e.food_variations)||void 0===s?void 0:s.map(e=>({name:e.name,values:{label:eV(e.values)}})):[]:(null==e?void 0:null===(c=e.selectedOption)||void 0===c?void 0:c.length)>0?null==e?void 0:e.selectedOption:[]}}),eG=(e,t)=>{var i,l,n,o,a,r;let d={latitude:null==ev?void 0:ev.latitude,longitude:null==ev?void 0:ev.longitude};if("pharmacy"!==(0,eQ.X)())return{cart:JSON.stringify(e),...f,schedule_at:"now"===L?null:L,payment_method:b,order_type:y,store_id:null==ev?void 0:ev.id,coupon_code:null==k?void 0:k.code,coupon_discount_amount:null==k?void 0:k.discount,coupon_discount_title:null==k?void 0:k.title,discount_amount:(0,C.BH)(t),distance:(0,C.NY)(null==ew?void 0:null===(o=ew.data)||void 0===o?void 0:null===(a=o.rows)||void 0===a?void 0:null===(r=a[0])||void 0===r?void 0:r.elements,d,f),order_amount:100,dm_tips:ee,cutlery:M,unavailable_item_note:B,delivery_instruction:O};{let s=new FormData;return s.append("cart",JSON.stringify(e)),"now"!==L&&s.append("schedule_at",L),s.append("payment_method",b),s.append("order_type",y),s.append("store_id",null==ev?void 0:ev.id),(null==k?void 0:k.code)&&s.append("coupon_code",null==k?void 0:k.code),s.append("coupon_discount_amount",null==k?void 0:k.discount),s.append("coupon_discount_title",null==k?void 0:k.title),s.append("discount_amount",(0,C.BH)(t)),s.append("distance",(0,C.NY)(null==ew?void 0:null===(i=ew.data)||void 0===i?void 0:null===(l=i.rows)||void 0===l?void 0:null===(n=l[0])||void 0===n?void 0:n.elements,d,f)),s.append("order_amount",j),s.append("dm_tips",ee),s.append("address",null==f?void 0:f.address),s.append("address_type",null==f?void 0:f.address_type),s.append("lat",null==f?void 0:f.lat),s.append("latitude",null==f?void 0:f.latitude),s.append("lng",null==f?void 0:f.lng),s.append("longitude",null==f?void 0:f.longitude),(null==ea?void 0:ea.length)>0&&(null==ea||ea.forEach(e=>s.append("order_attachment",e))),s}},eU=()=>{let e=null==ev||!ev.schedule_order||(0,C.Yu)("campaign"===m?g:x,L);if(e){var t;let i=null==eX?void 0:null===(t=eX.data)||void 0===t?void 0:t.wallet_balance,l="campaign"===m?g:x;if("wallet"===b){if(Number(i)<Number(j))$.Am.error(es("Wallet balance is below total amount."),{id:"wallet",position:"bottom-right"});else{let n=eq(l,0),o=e=>{if(null==e?void 0:e.data){var t,i,l,n,o,a;if("digital_payment"===b){$.Am.success(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message);let r=U.F,d="".concat(window.location.origin,"/order?order_id=").concat(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.order_id,"&total=").concat(null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.total_ammount),s="".concat(r,"/payment-mobile?order_id=").concat(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.order_id,"&customer_id=").concat(null==eX?void 0:null===(o=eX.data)||void 0===o?void 0:o.id,"&callback=").concat(d);localStorage.setItem("totalAmount",j),ed((0,eW.aE)()),et().push(s,void 0,{shallow:!0})}else"wallet"===b?($.Am.success(null==e?void 0:null===(a=e.data)||void 0===a?void 0:a.message),N(!0)):203===e.status&&$.Am.error(e.data.errors[0].message)}};(null==n?void 0:n.length)>0&&eT(eG(n,l),{onSuccess:o,onError(e){var t,i,l;null==e||null===(t=e.response)||void 0===t||null===(i=t.data)||void 0===i||null===(l=i.errors)||void 0===l||l.forEach(e=>$.Am.error(e.message,{position:"bottom-right"}))}})}}else{let a=eq(l,0),r=e=>{if(null==e?void 0:e.data){var t,i,l,n,o;if($.Am.success(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message,{id:b}),"digital_payment"===b){let a="".concat(window.location.origin,"/order?order_id=").concat(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.order_id,"&total=").concat(null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.total_ammount),r="".concat(U.F,"/payment-mobile?order_id=").concat(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.order_id,"&customer_id=").concat(null==eX?void 0:null===(o=eX.data)||void 0===o?void 0:o.id,"&callback=").concat(a);localStorage.setItem("totalAmount",j),ed((0,eW.aE)()),et().push(r,void 0,{shallow:!0})}else N(!0)}};(null==a?void 0:a.length)>0&&eT(eG(a,l),{onSuccess:r,onError(e){var t,i,l;null==e||null===(t=e.response)||void 0===t||null===(i=t.data)||void 0===i||null===(l=i.errors)||void 0===l||l.forEach(e=>$.Am.error(e.message,{position:"bottom-right"}))}})}}else $.Am.error(es("One or more item is not available for the chosen preferable schedule time."))},eY=()=>$.Am.error(es("".concat((0,eK.s)().slice(0,-1)," is closed. Try again later."))),e$=()=>{var e,t;let i=null===(e=(0,C.PR)(eZ))||void 0===e?void 0:null===(t=e.pivot)||void 0===t?void 0:t.maximum_cod_order_amount;"take_away"===y?eU():"cash_on_delivery"===b&&i?j<=i?eU():$.Am.error(es(ek._b),{duration:5e3}):eU()},e1=()=>{if(null==ev?void 0:ev.active){if((null==ev?void 0:ev.schedules.length)>0){let e=e0()().weekday(),t=null==ev?void 0:ev.schedules.filter(t=>t.day===e),i=[];t.forEach(e=>{(0,C._e)(null==e?void 0:e.opening_time,null==e?void 0:e.closing_time)&&i.push(e)}),i.length>0&&e$()}else eY()}else eY()},e5=()=>{};(0,n.useEffect)(()=>{F&&e3()},[F]);let e3=()=>{"buy_now"===m&&ed((0,eW.jh)(null==x?void 0:x[0])),localStorage.setItem("totalAmount",j),et().push("/order",void 0,{shallow:!0})},e7=e=>{er([e])},e6=()=>(0,l.jsx)(q,{setPaymentMethod:P,paymentMethod:b,zoneData:eZ,configData:u,storeZoneId:null==ev?void 0:ev.zone_id}),e4=e=>{W(1)},e8=e=>{X(e)},ti=e=>{V(e)};return(0,l.jsxs)(s.ZP,{container:!0,spacing:3,mb:"2rem",children:[(0,l.jsx)(s.ZP,{item:!0,xs:12,md:7,children:(0,l.jsxs)(d.Z,{spacing:3,children:[(0,l.jsx)(em,{storeData:ev,setOrderType:_,orderType:y,setAddress:Z,address:f,configData:u,setDeliveryTip:ei}),(0,l.jsx)(eS,{storeData:ev,handleChange:eI,today:ej.Lg,tomorrow:ej.Ro,numberOfDay:S,configData:u,setScheduleAt:T}),ev&&(0,l.jsx)(eE,{store_id:null==ev?void 0:ev.id,setCouponDiscount:E,counponRemove:e5,couponDiscount:k,totalAmount:j,deliveryFee:el,deliveryTip:ee}),"delivery"===y?0===Number.parseInt(null==u?void 0:u.dm_tips_status)&&(0,l.jsx)(a.iD,{children:(0,l.jsx)(I,{deliveryTip:ee,setDeliveryTip:ei})}):(0,l.jsx)(l.Fragment,{children:eZ&&ev&&e6()})]})}),(0,l.jsx)(s.ZP,{item:!0,xs:12,md:5,height:"auto",children:(0,l.jsxs)(a.Xw,{spacing:3,children:[(0,l.jsx)(a.iD,{height:"auto",children:(0,l.jsxs)(d.Z,{spacing:3,justifyContent:"space-between",alignItems:"center",children:[(0,l.jsx)(D.E9,{variant:"h6",children:es("Order Summary")}),(0,l.jsx)(eL.Z,{style:{maxHeight:"500px",width:"100%"},children:(0,l.jsx)(eN,{page:m,configData:u,cartList:x,t:es,campaignItemList:g})}),"food"===(0,eQ.X)()&&(null==ev?void 0:ev.cutlery)&&(0,l.jsx)(e2,{isChecked:M,handleChange:e4}),(0,l.jsx)(e9,{title:"If Any product is not available",data:te,handleChange:e8}),(0,l.jsx)(e9,{title:"Add More Delivery Instruction",data:tt,handleChange:ti}),ew&&ev?(0,l.jsx)(eB,{cartList:"campaign"===m?g:x,storeData:ev,couponDiscount:k,taxAmount:R,distanceData:ew,total_order_amount:Q,configData:u,couponInfo:w,orderType:y,deliveryTip:ee,origin:{latitude:null==ev?void 0:ev.latitude,longitude:null==ev?void 0:ev.longitude},destination:f,zoneData:eZ,extraCharge:eP&&eP,setDeliveryFee:eo,extraChargeLoading:eA,deliveryFee:el}):eA&&(0,l.jsx)(eR,{})]})}),"pharmacy"===ec&&(0,l.jsx)(a.iD,{children:(0,l.jsx)(eJ,{t:es,handleImageUpload:e7})})]})}),"delivery"===y?(0,l.jsx)(s.ZP,{item:!0,md:7,xs:12,children:eZ&&ev&&e6()}):null,(0,l.jsx)(s.ZP,{item:!0,md:12,xs:12,children:(0,l.jsx)(eH,{placeOrder:e1,orderLoading:eF,zoneData:eZ,orderType:y})})]})};ti.propTypes={};var tl=i(58345);let tn=e=>{var t,i,o,a,r;let{storeData:d,configData:v,distanceData:h,orderType:m,zoneData:x,origin:j,destination:y,totalOrderAmount:_,deliveryTip:f}=e,Z=(0,c.Z)();(0,p.I0)();let w=(null===(t=null==h?void 0:null===(i=h.data)||void 0===i?void 0:null===(o=i.rows)||void 0===o?void 0:null===(a=o[0])||void 0===a?void 0:a.elements[0])||void 0===t?void 0:null===(r=t.distance)||void 0===r?void 0:r.value)/1e3,{data:P,refetch:S}=en({tempDistance:w});(0,n.useEffect)(()=>{S()},[h]);let A=(e,t,i,l,n,o,a)=>{var r,d,s,c,u,v,h,p,m,x,g;let j=(0,C.NY)(null==i?void 0:null===(r=i.rows)||void 0===r?void 0:null===(d=r[0])||void 0===d?void 0:d.elements,o,a),y=j*(null==t?void 0:t.per_km_shipping_charge);if(1===Number.parseInt(null==e?void 0:e.self_delivery_system)){if(null==e?void 0:e.free_delivery)return 0;if((y=j*(null==e?void 0:e.per_km_shipping_charge)||0)>(null==e?void 0:e.minimum_shipping_charge)&&y<e.maximum_shipping_charge)return y;if(y<(null==e?void 0:e.minimum_shipping_charge))return null==e?void 0:e.minimum_shipping_charge;if((null==e?void 0:e.maximum_shipping_charge)!==null&&y>(null==e?void 0:e.maximum_shipping_charge))return null==e?void 0:e.maximum_shipping_charge}else if((null==n?void 0:null===(s=n.data)||void 0===s?void 0:null===(c=s.zone_data)||void 0===c?void 0:c.length)>0){let f=(0,C.PR)(n);if(null==f?void 0:null===(u=f.pivot)||void 0===u?void 0:u.per_km_shipping_charge)return(y=j*((null==f?void 0:null===(v=f.pivot)||void 0===v?void 0:v.per_km_shipping_charge)||0))<(null==f?void 0:null===(h=f.pivot)||void 0===h?void 0:h.minimum_shipping_charge)?(null==f?void 0:null===(x=f.pivot)||void 0===x?void 0:x.minimum_shipping_charge)+P:y>(null==f?void 0:null===(p=f.pivot)||void 0===p?void 0:p.maximum_shipping_charge)&&(null==f?void 0:null===(m=f.pivot)||void 0===m?void 0:m.maximum_shipping_charge)!==null?(null==f?void 0:null===(g=f.pivot)||void 0===g?void 0:g.maximum_shipping_charge)+P:(null==t?void 0:t.free_delivery_over)!==null&&(null==t?void 0:t.free_delivery_over)>0&&_>(null==t?void 0:t.free_delivery_over)||"take_away"===l?0:y+P}};return(0,l.jsxs)(D.M0,{container:!0,item:!0,md:12,xs:12,spacing:1,children:[(0,l.jsx)(s.ZP,{item:!0,md:8,xs:8,children:(0,g.t)("Deliveryman tips")}),(0,l.jsx)(s.ZP,{item:!0,md:4,xs:4,align:"right",children:(0,b.B9)(f)}),(0,l.jsx)(s.ZP,{item:!0,md:8,xs:8,children:(0,g.t)("Delivery fee")}),(0,l.jsx)(s.ZP,{item:!0,md:4,xs:4,align:"right",children:d&&(0,b.B9)(A(d,v,null==h?void 0:h.data,m,x,j,y))}),(0,l.jsx)(eM.Z,{}),(0,l.jsxs)(D.v5,{container:!0,md:12,xs:12,mt:"1rem",children:[(0,l.jsx)(s.ZP,{item:!0,md:8,xs:8,pl:".5rem",children:(0,l.jsx)(u.Z,{fontWeight:"bold",color:Z.palette.primary.main,children:(0,g.t)("Total")})}),(0,l.jsx)(s.ZP,{item:!0,md:4,xs:4,align:"right",children:(()=>{let e=A(d,v,null==h?void 0:h.data,m,x,j,y)+Number(f);return localStorage.setItem("totalAmount",e),(0,l.jsx)(u.Z,{color:Z.palette.primary.main,children:d&&(0,b.B9)(e)})})()})]})]})};var to=i(32666);let ta=["jpg","jpeg","gif","png","pdf","doc","docx","deb"],tr=e=>{let{setPrescriptionImages:t,prescriptionImages:i}=e,n=e=>{t(e)};return(0,l.jsxs)(a.iD,{children:[(0,l.jsx)(D.qv,{const:!0,id:"demo-row-radio-buttons-group-label",children:(0,g.t)("Prescriptions")}),(0,l.jsx)(to.Z,{fileImagesHandler:n,totalFiles:i,maxFileSize:2e7,supportedFileFormats:ta,acceptedFileInputFormat:"application/pdf,image/*,text/plain,.doc, .docx,.txt",labelText:(0,g.t)("File Upload"),prescription:"true"})]})},td=e=>{let{storeId:t}=e,i=(0,ee.useRouter)(),o=(0,N.Z)("(max-width:1180px)"),[r,c]=(0,n.useState)("delivery"),[v,h]=(0,n.useState)(void 0),[m,x]=(0,n.useState)(!1),[j,y]=(0,n.useState)(null),[_,f]=(0,n.useState)(null),[Z,w]=(0,n.useState)(null),[b,P]=(0,n.useState)(null),[S,A]=(0,n.useState)(0),[k,E]=(0,n.useState)(""),{configData:L}=(0,p.v9)(e=>e.configData),{data:T,refetch:F}=eg(t);(0,n.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("currentLatLng")),t=localStorage.getItem("location");h({...e,latitude:null==e?void 0:e.lat,longitude:null==e?void 0:e.lng,address:t,address_type:"Selected Address"}),F()},[t]);let R=JSON.parse(window.localStorage.getItem("currentLatLng")),z=e=>{E(e.target.value)},{data:M}=(0,H.useQuery)(["zoneId",location],async()=>ey.K.getZoneId(R),{retry:1}),{data:W,refetch:B}=(0,H.useQuery)(["get-distance",T,v],()=>ey.K.distanceApi(T,v),{enabled:!1,onError:G.R});(0,n.useEffect)(()=>{T&&v&&B(),X()},[T,v]);let X=()=>{(null==T?void 0:T.delivery)&&(null==L?void 0:L.home_delivery_status)===1&&(null==T?void 0:T.take_away)&&(null==L?void 0:L.takeaway_status)===1?c("delivery"):(null==T?void 0:T.take_away)&&(null==L?void 0:L.takeaway_status)===1?c("take_away"):(null==T?void 0:T.delivery)&&(null==L?void 0:L.home_delivery_status)===1&&c("delivery")},{mutate:O,isLoading:V}=(0,H.useMutation)("order-place",e_.R.prescriptionPlaceOrder),Q=()=>{var e,t,i;let l={latitude:null==T?void 0:T.latitude,longitude:null==T?void 0:T.longitude};return{...v,payment_method:_,order_type:r,store_id:null==T?void 0:T.id,distance:(0,C.NY)(null==W?void 0:null===(e=W.data)||void 0===e?void 0:null===(t=e.rows)||void 0===t?void 0:null===(i=t[0])||void 0===i?void 0:i.elements,l,v),prescriptionImages:j,order_note:k,dm_tips:S,unavailable_item_note:Z,delivery_instruction:b}},U=()=>{let e=e=>{if(null==e?void 0:e.data){var t;$.Am.success(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message),i.push("/order",void 0,{shallow:!0})}};O(Q(),{onSuccess:e,onError(e){var t,i,l;null==e||null===(t=e.response)||void 0===t||null===(i=t.data)||void 0===i||null===(l=i.errors)||void 0===l||l.forEach(e=>$.Am.error(e.message,{position:"bottom-right"}))}})},Y=()=>{_&&"cash_on_delivery"===_?j.length>0?U():$.Am.error(ek.gq):$.Am.error((0,g.t)("Without any payment method, you can not place the order."))},J=e=>{P(e)};return(0,l.jsxs)(s.ZP,{container:!0,spacing:3,mb:"2rem",children:[(0,l.jsx)(s.ZP,{item:!0,xs:12,md:o?12:7,children:(0,l.jsxs)(d.Z,{spacing:3,children:[(0,l.jsx)(tr,{prescriptionImages:j,setPrescriptionImages:y}),(0,l.jsx)(em,{storeData:T,setOrderType:c,orderType:r,setAddress:h,address:v,configData:L,forprescription:"true"}),(0,l.jsx)(a.iD,{children:(0,l.jsx)(I,{deliveryTip:S,setDeliveryTip:A})})]})}),(0,l.jsxs)(s.ZP,{item:!0,xs:12,md:o?12:5,height:"auto",children:[(0,l.jsx)(a.iD,{height:"auto",sx:{mb:"1.5rem"},children:(0,l.jsx)(e9,{title:"Add More Delivery Instruction",data:tt,handleChange:J})}),(0,l.jsx)(a.iD,{height:"auto",children:(0,l.jsxs)(d.Z,{spacing:3,justifyContent:"space-between",alignItems:"center",children:[(0,l.jsx)(D.E9,{variant:"h6",children:(0,g.t)("Order Summary")}),W&&T?(0,l.jsx)(tn,{storeData:T,distanceData:W,configData:L,orderType:r,origin:{latitude:null==T?void 0:T.latitude,longitude:null==T?void 0:T.longitude},destination:v,zoneData:M,totalOrderAmount:0,deliveryTip:S}):(0,l.jsx)(eR,{})]})})]}),(0,l.jsx)(s.ZP,{item:!0,md:o?12:7,xs:12,children:(0,l.jsxs)(a.iD,{children:[(0,l.jsx)(d.Z,{align:"center",children:(0,l.jsx)(u.Z,{variant:"h6",children:(0,g.t)("Additional Note")})}),(0,l.jsx)(a.Ks,{"aria-label":"empty textarea",placeholder:(0,g.t)("Additional Note"),style:{width:"100%",minHeight:"50px",marginTop:"20px"},onChange:e=>z(e)})]})}),(0,l.jsx)(s.ZP,{item:!0,md:o?12:7,xs:12,children:M&&T&&(0,l.jsx)(q,{configData:L,setPaymentMethod:f,paymentMethod:_,zoneData:M,forprescription:"true",storeZoneId:null==T?void 0:T.zone_id,prescriptionPayment:!0})}),(0,l.jsx)(s.ZP,{item:!0,md:12,xs:12,children:(0,l.jsx)(eH,{placeOrder:Y,orderLoading:V,zoneData:M})})]})};var ts=i(52588);let tc=e=>{let{configData:t,landingPageData:i}=e,n=(0,ee.useRouter)(),{page:a,store_id:r,id:d}=n.query,{cartList:s,campaignItemList:c,buyNowItemList:u,totalAmount:v}=(0,p.v9)(e=>e.cart),h=(0,tl.l)(s),m=()=>{n.push("/home",void 0,{shallow:!0})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(er.ZP,{}),(0,l.jsx)(ed.default,{title:"Checkout - ".concat(null==t?void 0:t.business_name)}),(0,l.jsx)(o.Z,{configData:t,landingPageData:i,children:(0,l.jsxs)(es.Z,{from:"checkout",children:["parcel"===a&&(0,l.jsx)(ea,{}),"prescription"===a&&(0,l.jsx)(td,{storeId:r}),"campaign"===a&&c.length>0&&(0,l.jsx)(ti,{router:n,configData:t,page:a,cartList:h,campaignItemList:c,totalAmount:v}),"cart"===a&&h.length>0&&(0,l.jsx)(ti,{router:n,configData:t,page:a,cartList:h,campaignItemList:c,totalAmount:v}),"buy_now"===a&&u.length>0&&(0,l.jsx)(ti,{router:n,configData:t,page:a,cartList:u,campaignItemList:c,totalAmount:v}),(()=>{if(n.isReady){if("cart"===a&&0===h.length||"campaign"===a&&0===c.length)return(0,l.jsx)(ts.default,{children:m()});a||n.push("/home",void 0,{shallow:!0})}})()]})})]})};var tu=!0,tv=tc},52588:function(e,t,i){"use strict";i.r(t);var l=i(85893),n=i(67294);let o=e=>{let{children:t}=e,[i,o]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{o(!0)},[]),(0,l.jsx)(l.Fragment,{children:i&&t})};o.propTypes={},t.default=o},46941:function(e,t,i){"use strict";var l=i(85893),n=i(67294),o=i(11163);let a=e=>{let{children:t,from:i}=e,a=(0,o.useRouter)(),[r,d]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{if(!a.isReady)return;let e=localStorage.getItem("token");e?d(!0):a.push({pathname:"/auth/sign-in",query:{from:i}},void 0,{shallow:!0})},[a.isReady]),r)?(0,l.jsx)(l.Fragment,{children:t}):null};t.Z=a},39626:function(e,t,i){"use strict";i.d(t,{Z:function(){return c}});var l=i(85893),n=i(67294),o=i(30120),a=i(80562),r=i(75058);let d=n.forwardRef((e,t)=>{let{imageChangeHandler:i}=e;return(0,l.jsx)("input",{ref:t,id:"file",name:"file",type:"file",accept:"image/*",hidden:!0,onChange(e){null==i||i(e)}})}),s=e=>{let{imageChangeHandler:t}=e,i=(0,n.useRef)();return(0,l.jsxs)(o.Z,{sx:{position:"absolute",bottom:"18%",right:"0px",height:"38px",width:"38px",borderRadius:"50%",background:e=>e.palette.neutral[100]},children:[(0,l.jsx)(a.Z,{onClick:()=>i.current.click(),children:(0,l.jsx)(r.Z,{color:"secondary"})}),(0,l.jsx)(d,{ref:i,imageChangeHandler:t})]})};s.propTypes={};var c=s},57790:function(e,t,i){"use strict";i.d(t,{Z:function(){return u}});var l=i(85893),n=i(67294),o=i(77595),a=i(54970),r=i(9144);let d=e=>{let{label:t,maxWidth:i,width:n,error:d,borderRadius:s}=e;return(0,l.jsxs)(o.oC,{width:n,error:d,borderRadius:s,children:[(0,l.jsx)(a.Z,{}),(0,l.jsx)(r.Z,{children:t})]})},s=e=>{let t,{anchor:i,file:n,label:a,width:r,imageUrl:s,borderRadius:c,error:u,objectFit:v,height:h}=e;return t="string"!=typeof n?{url:URL.createObjectURL(n)}:n,(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(o.JL,{children:t?(0,l.jsx)(o.Ec,{onClick:()=>i.current.click(),width:r,objectFit:v,borderRadius:c,height:h,children:"string"!=typeof n?(0,l.jsx)("img",{src:t.url,alt:"preview"}):(0,l.jsx)("img",{src:s?"".concat(s,"/").concat(t):t,alt:"profile"})}):(0,l.jsx)(o.Ec,{onClick:()=>i.current.click(),width:r,height:h,objectFit:!0,borderRadius:c,children:(0,l.jsx)(d,{label:a,width:r,error:u,borderRadius:c})})})})},c=e=>{let{file:t,type:i,labelText:o,hintText:a,imageOnChange:r,onChange:d,width:c,imageUrl:u,borderRadius:v,error:h,objectFit:p,height:m}=e,x=(0,n.useRef)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s,{anchor:x,file:t,label:o,hintText:a,width:c,imageUrl:u,borderRadius:v,error:h,height:m,objectFit:p}),(0,l.jsx)("input",{ref:x,id:"file",name:"file",type:"file",accept:"image/*",hidden:!0,onChange(e){d(e)}})]})};var u=c},74485:function(e,t,i){"use strict";var l=i(85893);i(67294);var n=i(45697),o=i.n(n),a=i(29630),r=i(22120);let d=e=>{let{text:t,textAlign:i}=e,{t:n}=(0,r.$G)();return(0,l.jsx)(a.Z,{textAlign:i||"center",fontWeight:"500",sx:{fontSize:{xs:"16px",md:"24px"}},children:n(t)})};d.propTypes={text:o().string.isRequired},t.Z=d}},function(e){e.O(0,[1255,2506,6454,5269,580,8672,9774,2888,179],function(){return e(e.s=72590)}),_N_E=e.O()}]);