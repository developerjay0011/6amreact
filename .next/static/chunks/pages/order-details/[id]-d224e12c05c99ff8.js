(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8745],{7078:function(e,t,n){"use strict";var i=n(64836);t.Z=void 0;var r=i(n(64938)),l=n(85893),s=(0,r.default)((0,l.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"}),"Chat");t.Z=s},31887:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/order-details/[id]",function(){return n(41977)}])},41977:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return eE},default:function(){return eM}});var i=n(85893),r=n(40793),l=n(74121),s=n(57542),d=n(67294),o=n(45269),a=n(30700),c=n(79072),x=n(29630),u=n(57412),h=n(77591),p=n(17446),m=n(22120);let j=e=>{let{data:t,t:n}=e;return(0,i.jsx)(a.S,{children:(0,i.jsxs)(o.Xw,{alignItems:"center",justifyContent:"center",children:[t?(0,i.jsxs)(x.Z,{sx:{color:"primary.main",fontSize:"36px",fontWeight:"600"},children:[n("Parcel Order")," # ",null==t?void 0:t.id]}):(0,i.jsx)(u.Z,{variant:"text",width:"200px",height:"50px"}),t?(0,i.jsxs)(h.ZT,{sx:{color:e=>e.palette.neutral[400]},children:[n("Parcel Order Placed")," :"," ",(0,i.jsx)(p.Z,{date:null==t?void 0:t.created_at})]}):(0,i.jsx)(u.Z,{variant:"text",width:"240px",height:"20px"}),t&&(0,i.jsxs)(h.ZT,{children:[n("Parcel Order Scheduled")," :",(0,i.jsx)(p.Z,{date:null==t?void 0:t.schedule_at})]})]})})};j.propTypes={};var g=n(77274),v=n(18377),f=n(89113),Z=n(9473),_=n(58861),w=n(86390),b=n(73369);let y=e=>{var t,n;let{t:r,title:l,note:s,image:a,reason:c,configData:u}=e,[h,p]=(0,d.useState)(!1),[m,j]=(0,d.useState)(null);(0,d.useEffect)(()=>{m&&p(!0)},[m]);let g=e=>{j(e)},f=e=>{p(e),j(null)};return(0,i.jsxs)(o.Xw,{spacing:.5,children:[(0,i.jsx)(x.Z,{sx:{fontWeight:"500",textTransform:"capitalize"},children:r(l)}),c&&(0,i.jsx)(x.Z,{sx:{color:e=>e.palette.neutral[400]},children:c}),s&&(0,i.jsxs)(x.Z,{sx:{color:e=>e.palette.neutral[400]},children:[c&&r("Note:-")," ",s]}),a&&(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",gap:1,flexWrap:"wrap",children:[null===(t=JSON.parse(a))||void 0===t?void 0:t.map((e,t)=>{var n;return(0,i.jsx)(v.Z,{onClick:()=>g(e),children:(0,i.jsx)(_.Z,{src:"".concat(null==u?void 0:null===(n=u.base_urls)||void 0===n?void 0:n.refund_image_url,"/").concat(e),alt:s,height:"100px",width:"100px"})},t)}),(0,i.jsx)(w.Z,{openModal:h,handleClose:f,children:(0,i.jsx)(b.Z,{modalImage:"".concat(null==u?void 0:null===(n=u.base_urls)||void 0===n?void 0:n.refund_image_url,"/").concat(m),handleModalClose:f})})]})]})};y.propTypes={};let W=e=>{var t,n,r,l;let{trackOrderData:s,configData:d,t:o}=e;return(0,i.jsx)("div",{children:(null==s?void 0:s.refund)&&(null==s?void 0:s.order_status)==="refund_request_canceled"?(0,i.jsx)(c.ZP,{item:!0,xs:12,align:"left",children:(0,i.jsx)(y,{t:o,title:"Refund cancellation note:",note:null===(t=s.refund)||void 0===t?void 0:t.admin_note,configData:d})}):(null==s?void 0:s.order_status)==="refund_requested"&&(0,i.jsx)(c.ZP,{item:!0,xs:12,align:"left",children:(0,i.jsx)(y,{t:o,title:"Refund request note:",note:null==s?void 0:null===(n=s.refund)||void 0===n?void 0:n.customer_note,reason:null==s?void 0:null===(r=s.refund)||void 0===r?void 0:r.customer_reason,image:null==s?void 0:null===(l=s.refund)||void 0===l?void 0:l.image,configData:d})})})};W.propTypes={};var C=n(14957),P=n(41664),k=n.n(P),I=n(7078);let S=e=>{var t,n,r,l,s,d;let{trackOrderData:u,configData:h,t:p}=e;return(0,i.jsxs)(a.vY,{container:!0,md:12,xs:12,children:[(0,i.jsx)(c.ZP,{item:!0,md:12,xs:12,align:"left",mb:"1rem",children:(0,i.jsx)(x.Z,{fontWeight:"bold",children:p("Store Information")})}),(0,i.jsx)(c.ZP,{item:!0,md:3.5,sm:4,xs:12,children:u&&(0,i.jsx)(_.Z,{src:"".concat(null==h?void 0:null===(t=h.base_urls)||void 0===t?void 0:t.store_cover_photo_url,"/").concat(null==u?void 0:null===(n=u.store)||void 0===n?void 0:n.cover_photo),height:"120px",borderRadius:".5rem"})}),(0,i.jsxs)(c.ZP,{item:!0,md:7.5,sm:8,xs:12,ml:"1rem",children:[(0,i.jsx)(x.Z,{children:u&&(null==u?void 0:null===(r=u.store)||void 0===r?void 0:r.name)}),(0,i.jsxs)(x.Z,{sx:{fontWeight:"bold"},children:[u&&(null==u?void 0:null===(l=u.store)||void 0===l?void 0:l.rating_count),(0,i.jsx)(C.Z,{sx:{fontSize:"16px",color:e=>e.palette.primary.main}})]}),(0,i.jsxs)(x.Z,{children:[p("Address")," : ",u&&(null==u?void 0:null===(s=u.store)||void 0===s?void 0:s.address)]}),(0,i.jsx)(o.Xw,{alignItems:"flex-end",mt:"1rem",children:u&&(null==u?void 0:u.order_status)==="pending"&&(0,i.jsx)(k(),{href:{pathname:"/chatting",query:{type:"vendor",id:null==u?void 0:null===(d=u.store)||void 0===d?void 0:d.vendor_id,routeName:"vendor_id",chatFrom:"true"}},children:(0,i.jsx)(I.Z,{sx:{height:25,width:25,color:e=>e.palette.primary.main}})})})]})]})};S.propTypes={};var D=n(40077);n(73782);var T=n(44373);let X=e=>{let t=e.reduce((e,t)=>t.price*t.quantity+e,0);return t},z=e=>e.reduce((e,t)=>(t.add_ons.length>0?t.add_ons.reduce((e,t)=>t.price*t.quantity+e,0):0)+e,0),O=e=>X(e)+z(e),B=e=>{var t,n,r;let{data:l,t:s,trackOrderData:d}=e,{configData:a}=(0,Z.v9)(e=>e.configData);return(0,i.jsxs)(o.Xw,{spacing:1,children:[(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,i.jsx)(x.Z,{fontWeight:"bold",children:s("Items Price")}),(0,i.jsx)(x.Z,{fontWeight:"bold",children:l&&(null==l?void 0:l.length)>0&&(0,f.B9)(X(l))})]}),(null==d?void 0:null===(t=d.module)||void 0===t?void 0:t.module_type)==="food"&&(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,i.jsxs)(x.Z,{fontWeight:"bold",children:[" ",s("Addons Price")]}),(0,i.jsx)(x.Z,{fontWeight:"bold",children:l&&(null==l?void 0:l.length)>0&&(0,f.B9)(z(l))})]}),(0,i.jsx)(T.Z,{}),(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,i.jsxs)(x.Z,{fontWeight:"bold",children:[" ",s("Subtotal")]}),(0,i.jsx)(x.Z,{fontWeight:"bold",children:l&&(null==l?void 0:l.length)>0&&(0,f.B9)(O(l))})]}),(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,i.jsxs)(x.Z,{fontWeight:"bold",children:[" ",s("Discount")]}),(0,i.jsxs)(x.Z,{fontWeight:"bold",children:["-",d&&(0,f.B9)(null==d?void 0:d.store_discount_amount)?(0,f.B9)(null==d?void 0:d.store_discount_amount):0]})]}),0!==Number.parseInt(null==d?void 0:d.coupon_discount_amount)&&(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,i.jsxs)(x.Z,{fontWeight:"bold",children:[" ",s("Coupon Discount")]}),(0,i.jsxs)(x.Z,{fontWeight:"bold",children:["-",d&&(0,f.B9)(null==d?void 0:d.coupon_discount_amount)]})]}),(null==a?void 0:a.tax_included)===0&&(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,i.jsxs)(x.Z,{fontWeight:"bold",children:[" ",s("VAT"),"(",null==l?void 0:null===(n=l[0])||void 0===n?void 0:null===(r=n.item_details)||void 0===r?void 0:r.tax,"%)"]}),(0,i.jsx)(x.Z,{fontWeight:"bold",children:d&&(0,f.B9)(null==d?void 0:d.total_tax_amount)})]}),0!==Number.parseInt(null==d?void 0:d.dm_tips)&&(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,i.jsx)(x.Z,{fontWeight:"bold",children:s("Delivery Man Tips")}),(0,i.jsx)(x.Z,{fontWeight:"bold",children:d&&(0,f.B9)(null==d?void 0:d.dm_tips)})]}),(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,i.jsx)(x.Z,{fontWeight:"bold",children:s("Delivery fee")}),(0,i.jsx)(x.Z,{fontWeight:"bold",children:d&&(0,f.B9)(null==d?void 0:d.delivery_charge)})]}),(0,i.jsx)(g.Z,{width:"100%",sx:{mt:"20px",borderBottom:e=>"2px solid ".concat(e.palette.neutral[300])}}),(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,i.jsx)(x.Z,{fontWeight:"bold",color:"primary.main",children:s("Total")}),(0,i.jsx)(x.Z,{fontWeight:"bold",children:d&&(null==a?void 0:a.tax_included)===1?(0,f.B9)(null==d?void 0:d.order_amount):(0,f.B9)((null==d?void 0:d.order_amount)-(null==d?void 0:d.total_tax_amount))})]})]})};B.propTypes={};let R=()=>{let{t:e}=(0,m.$G)();return(0,i.jsxs)(c.ZP,{container:!0,mt:"1rem",children:[(0,i.jsx)(c.ZP,{item:!0,xs:12,md:12,align:"center",children:(0,i.jsx)(x.Z,{fontWeight:"bold",children:e("Order Summery")})}),(0,i.jsxs)(c.ZP,{item:!0,xs:12,md:12,align:"center",mt:"1rem",children:[(0,i.jsx)(D.Z,{style:{maxHeight:"300px"},children:(0,i.jsxs)(c.ZP,{container:!0,justifyContent:"center",alignItems:"center",md:12,xs:12,spacing:{xs:1},mb:"1rem",children:[(0,i.jsx)(c.ZP,{item:!0,md:3,xs:4,sm:2,children:(0,i.jsx)(u.Z,{width:"80%",height:"130px",variant:"text"})}),(0,i.jsxs)(c.ZP,{item:!0,md:9,xs:8,sm:8,align:"left",children:[(0,i.jsx)(u.Z,{width:"100px",variant:"text"}),(0,i.jsx)(u.Z,{width:"100px",variant:"text"}),(0,i.jsx)(u.Z,{width:"100px",variant:"text"})]})]})}),(0,i.jsx)(c.ZP,{item:!0,md:12,xs:12,mb:"10px",children:(0,i.jsx)(g.Z,{width:"100%",sx:{mt:"20px",borderBottom:e=>"2px solid ".concat(e.palette.neutral[300])}})}),(0,i.jsx)(c.ZP,{item:!0,xs:12,md:12,children:(0,i.jsxs)(o.Xw,{spacing:1,children:[(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,i.jsx)(x.Z,{fontWeight:"bold",children:e("Items Price")}),(0,i.jsx)(u.Z,{variant:"text",width:"100px"})]}),(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,i.jsxs)(x.Z,{fontWeight:"bold",children:[" ",e("Addons Price")]}),(0,i.jsx)(u.Z,{variant:"text",width:"100px"})]}),(0,i.jsx)(T.Z,{}),(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,i.jsxs)(x.Z,{fontWeight:"bold",children:[" ",e("Subtotal")]}),(0,i.jsx)(u.Z,{variant:"text",width:"100px"})]}),(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,i.jsxs)(x.Z,{fontWeight:"bold",children:[" ",e("Discount")]}),(0,i.jsx)(u.Z,{variant:"text",width:"100px"})]}),(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,i.jsxs)(x.Z,{fontWeight:"bold",children:[" ",e("Coupon Discount")]}),(0,i.jsx)(u.Z,{variant:"text",width:"100px"})]}),(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,i.jsx)(x.Z,{fontWeight:"bold",children:e("VAT")}),(0,i.jsx)(u.Z,{variant:"text",width:"100px"})]}),(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,i.jsx)(x.Z,{fontWeight:"bold",children:e("Delivery man tips")}),(0,i.jsx)(u.Z,{variant:"text",width:"100px"})]}),(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,i.jsx)(x.Z,{fontWeight:"bold",children:e("Delivery fee")}),(0,i.jsx)(u.Z,{variant:"text",width:"100px"})]}),(0,i.jsx)(g.Z,{width:"100%",sx:{mt:"20px",borderBottom:e=>"2px solid ".concat(e.palette.neutral[300])}}),(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,i.jsx)(x.Z,{fontWeight:"bold",color:"primary.main",children:e("Total")}),(0,i.jsx)(u.Z,{variant:"text",width:"100px"})]})]})})]})]})},A=e=>{let t=e.map((t,n)=>"".concat(e[0].name,"(").concat(e[0].quantity,")").concat(n!==e.length-1?",":""));return t},F=e=>{let{trackOrderData:t,configData:n,t:r,data:l}=e;return(0,i.jsx)(v.Z,{children:t?(0,i.jsxs)(c.ZP,{container:!0,mt:"1rem",children:[(0,i.jsx)(c.ZP,{item:!0,xs:12,md:12,align:"center",children:(0,i.jsx)(x.Z,{fontWeight:"bold",children:r("Order Summery")})}),(0,i.jsxs)(c.ZP,{item:!0,xs:12,md:12,align:"center",mt:"1rem",children:[(0,i.jsx)(D.Z,{style:{maxHeight:"300px"},children:l&&(null==l?void 0:l.length)>0&&(null==l?void 0:l.map(e=>{var t,l,s,d;return(0,i.jsxs)(c.ZP,{container:!0,justifyContent:"center",alignItems:"center",md:12,xs:12,spacing:{xs:1},mb:"1rem",children:[(0,i.jsx)(c.ZP,{item:!0,md:3,xs:4,sm:2,children:e.item_campaign_id?(0,i.jsx)(_.Z,{src:"".concat(null==n?void 0:null===(t=n.base_urls)||void 0===t?void 0:t.campaign_image_url,"/").concat(e.item_details.image),height:"90px",maxWidth:"90px",width:"100%",loading:"lazy",smHeight:"50px"}):(0,i.jsx)(_.Z,{src:"".concat(null==n?void 0:null===(l=n.base_urls)||void 0===l?void 0:l.item_image_url,"/").concat(e.item_details.image),height:"90px",maxWidth:"90px",width:"100%",loading:"lazy",smHeight:"70px",borderRadius:".7rem"})}),(0,i.jsxs)(c.ZP,{item:!0,md:9,xs:8,sm:8,align:"left",children:[(0,i.jsx)(x.Z,{children:null==e?void 0:null===(s=e.item_details)||void 0===s?void 0:s.name}),(0,i.jsxs)(x.Z,{children:[r("Qty"),": ",null==e?void 0:e.quantity]}),(null==e?void 0:e.add_ons.length)>0&&(0,i.jsxs)(x.Z,{children:[r("Addons"),": ",A(null==e?void 0:e.add_ons)]}),(0,i.jsx)(x.Z,{color:"primary.main",fontSize:"16px",fontWeight:"bold",children:(0,f.B9)(null==e?void 0:null===(d=e.item_details)||void 0===d?void 0:d.price)})]})]},null==e?void 0:e.id)}))}),(0,i.jsx)(c.ZP,{item:!0,md:12,xs:12,mb:"10px",children:(0,i.jsx)(g.Z,{width:"100%",sx:{mt:"20px",borderBottom:e=>"2px solid ".concat(e.palette.neutral[300])}})}),(0,i.jsx)(c.ZP,{item:!0,xs:12,md:12,children:(0,i.jsx)(B,{data:l,t:r,trackOrderData:t})})]})]}):(0,i.jsx)(R,{})})};F.propTypes={};var E=n(52443),M=n(24073),q=n(54225),N=n(11163),H=n.n(N),$=n(86501),V=n(62097),G=n(61176),L=n(60274),Q=n(88767),U=n(67759);let Y=async e=>{let{data:t}=await G.Z.post(L.eE,e);return t};var J=n(9144),K=n(77745),ee=n(76779),et=n(51126),en=n(87086),ei=n(81029),er=n(67019);let el=e=>{let{setModalOpenForPayment:t,refetchOrderDetails:n,refetchTrackData:r,id:l,setModalOpen:s}=e,{mutate:d,isLoading:o}=(0,Q.useMutation)("order-payment-method-update",er.R.FailedPaymentMethodUpdate),a=()=>{let e=e=>{$.Am.success(e.data.message),n(),r(),t(!1)};d({order_id:l,_method:"put"},{onSuccess:e,onError:U.R})},c=()=>{t(!1),s(!0)};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(en.f,{width:"23rem",children:[(0,i.jsx)(K.Z,{id:"alert-dialog-title",sx:{padding:"10px 24px"},children:(0,i.jsx)(x.Z,{textAlign:"center",variant:"h6",children:(0,et.t)("Switch Your payment method ")})}),(0,i.jsx)(ee.Z,{children:(0,i.jsxs)(J.Z,{alignItems:"center",justifyContent:"center",width:"100%",spacing:{xs:1,sm:2,md:3},children:[(0,i.jsx)(ei.p1,{loading:o,variant:"contained",onClick:a,width:"14rem",children:(0,et.t)("Switch to Cash on Delivery")}),(0,i.jsx)(ei.tZ,{width:"14.5rem",variant:"contained",onClick:c,children:(0,et.t)("Cancel Order")})]})})]})})};var es=n(48746),ed=n(80591),eo=n(91326);let ea=e=>{var t,n,r;let{id:l,refetchOrderDetails:s,refetchTrackData:a,trackData:u}=e,[h,p]=(0,d.useState)(!1),[j,g]=(0,d.useState)(),[v,f]=(0,d.useState)(null),{t:Z}=(0,m.$G)();(0,V.Z)();let _=JSON.parse(window.localStorage.getItem("currentLatLng")),{data:b}=(0,Q.useQuery)(["zoneId",location],async()=>eo.K.getZoneId(_),{retry:1}),{data:y,refetch:W}=(0,ed.B)();(0,d.useEffect)(()=>{W().then()},[]);let{mutate:C,isLoading:P}=(0,Q.useMutation)("order-cancel",Y),k=()=>{H().push("/track-order/".concat(l),void 0,{shallow:!0})},I=()=>{if(v){let e=e=>{s(),a(),p(!1),$.Am.success(e.message)};C({order_id:l,reason:v,_method:"put"},{onSuccess:e,onError:U.R})}else $.Am.error("Please select a cancellation reason")};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.iD,{children:(0,i.jsxs)(c.ZP,{container:!0,spacing:2,children:[u&&((null==u?void 0:u.order_status)==="pending"||(null==u?void 0:u.order_status)==="confirmed"||(null==u?void 0:u.order_status)==="processing"||(null==u?void 0:u.order_status)==="accepted"||(null==u?void 0:u.order_status)==="picked_up"||(null==u?void 0:u.order_status)==="handover")&&(0,i.jsx)(c.ZP,{item:!0,xs:12,md:(null==u?void 0:u.order_status)==="confirmed"||(null==u?void 0:u.order_status)!=="pending"?12:6,children:(0,i.jsx)(q.Z,{variant:"contained",onClick:k,fullWidth:!0,children:(0,i.jsx)(x.Z,{variant:"h6",children:Z("Track Order")})})}),u&&(null==u?void 0:u.payment_method)==="digital_payment"&&(null==u?void 0:u.payment_status)==="unpaid"&&(null==b?void 0:null===(t=b.data)||void 0===t?void 0:null===(n=t.zone_data)||void 0===n?void 0:null===(r=n[0])||void 0===r?void 0:r.cash_on_delivery)?(0,i.jsx)(c.ZP,{item:!0,xs:12,sm:6,md:6,children:(0,i.jsx)(q.Z,{variant:"contained",fullWidth:!0,onClick:()=>g(!0),children:(0,i.jsx)(x.Z,{variant:"h6",children:Z("Switch to Cash on Delivery")})})}):(null==u?void 0:u.order_status)==="pending"&&(0,i.jsx)(c.ZP,{item:!0,xs:12,sm:6,md:6,children:(0,i.jsx)(q.Z,{variant:"contained",fullWidth:!0,onClick:()=>p(!0),children:(0,i.jsx)(x.Z,{variant:"h6",children:Z("Cancel Order")})})})]})}),(0,i.jsx)(w.Z,{openModal:h,setModalOpen:p,handleClose:()=>p(!1),children:(0,i.jsx)(es.Z,{cancelReason:v,setCancelReason:f,cancelReasonsData:y,setModalOpen:p,handleOnSuccess:I,orderLoading:P})}),(0,i.jsx)(w.Z,{openModal:j,setModalOpen:g,handleClose:()=>g(!1),children:(0,i.jsx)(el,{setModalOpenForPayment:g,setModalOpen:p,refetchOrderDetails:s,refetchTrackData:a,id:null==u?void 0:u.id})})]})},ec=async e=>{let{data:t}=await G.Z.post("".concat(L.Nv),e);return t},ex=()=>(0,Q.useMutation)("update-payment-method",ec);n(7851);var eu=n(2922);let eh=e=>{let{id:t,refetchOrderDetails:n,refetchTrackData:r,trackData:l}=e,[s,a]=(0,d.useState)(!1),{t:c}=(0,m.$G)(),{mutate:u,isLoading:h}=ex(),p=()=>{let e=e=>{$.Am.success(e.message),n(),r()};u({order_id:t,_method:"put"},{onSuccess:e,onError:U.R}),a(!1)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.iD,{children:(0,i.jsx)(q.Z,{variant:"contained",onClick:()=>a(!0),fullWidth:!0,children:(0,i.jsx)(x.Z,{variant:"h6",children:c("Switch to cash on delivery")})})}),(0,i.jsx)(eu.Z,{dialogTexts:"Are you sure you want to switch this order to Cash On Delivery?",open:s,onClose:()=>a(!1),onSuccess:p})]})};var ep=n(1890),em=n(95398),ej=n(82175),eg=n(31812),ev=n(74231),ef=n(53390),eZ=n(42492),e_=n(32666);let ew=async()=>{let{data:e}=await G.Z.get(L.fP);return e},eb=()=>(0,Q.useQuery)("get_refund_list",()=>ew(),{enabled:!1,onError:U.R}),ey=["jpg","jpeg","gif","png","pdf","doc","docx","deb"],eW=e=>{var t,n;let{open:r,onClick:l,onClose:s,onSuccess:a,dialogTexts:c,formSubmit:u,refundIsLoading:h}=e,{data:p,refetch:j}=eb();(0,d.useEffect)(()=>{j()},[]);let{t:g}=(0,m.$G)(),v=(0,ej.TA)({initialValues:{customer_reason:"",customer_note:"",identity_image:""},validationSchema:ev.Ry({customer_reason:ev.Z_().required(g("Please select a reason"))}),async onSubmit(e,t){try{b(e)}catch(n){}}}),f=[];p&&(null==p?void 0:null===(t=p.refund_reasons)||void 0===t?void 0:t.length)>0&&(null==p||null===(n=p.refund_reasons)||void 0===n||n.forEach(e=>{let t={label:e.reason,value:e.reason};f.push(t)}));let Z=e=>{v.setFieldValue("customer_note",e)},_=e=>{v.setFieldValue("customer_reason",e)},w=e=>{v.setFieldValue("identity_image",e)},b=e=>{u(e)};return(0,i.jsx)(ep.Z,{open:r,onClose:s,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:(0,i.jsx)(en.f,{children:(0,i.jsxs)(o.Xw,{spacing:1,children:[(0,i.jsx)(J.Z,{alignItems:"start",justifyContent:"center",children:(0,i.jsx)(K.Z,{id:"alert-dialog-title",sx:{padding:"10px 24px"},children:(0,i.jsx)(x.Z,{children:g("What’s Wrong With This Order? ")})})}),(0,i.jsx)(em.Z,{sx:{padding:"10px 24px"},children:(0,i.jsx)(o.Xw,{children:(0,i.jsx)("form",{noValidate:!0,onSubmit:v.handleSubmit,children:(0,i.jsxs)(J.Z,{spacing:2,children:[(0,i.jsx)(o.Xw,{children:(0,i.jsx)(ef.Z,{selectFieldData:f,inputLabel:g("Select an option"),passSelectedValue:_,touched:v.touched.customer_reason,errors:v.errors.customer_reason,fieldProps:v.getFieldProps("customer_reason")})}),(0,i.jsx)(o.Xw,{children:(0,i.jsx)(eZ.Z,{type:"text",label:g("Note"),touched:v.touched.customer_note,errors:v.errors.customer_note,fieldProps:v.getFieldProps("customer_note"),onChangeHandler:Z,value:v.values.customer_note,multiline:"true",rows:"2"})}),(0,i.jsx)(o.Xw,{paddingTop:"20px",children:(0,i.jsx)(e_.Z,{fileImagesHandler:w,totalFiles:v.values.identity_image,maxFileSize:2e7,supportedFileFormats:ey,acceptedFileInputFormat:"application/pdf,image/*,text/plain,.doc, .docx,.txt",labelText:g("File Upload"),width:"8rem",gridControl:"true"})}),(0,i.jsx)(o.Xw,{children:(0,i.jsx)(ee.Z,{sx:{padding:"0px"},children:(0,i.jsx)(J.Z,{alignItems:"center",justifyContent:"center",width:"100%",children:(0,i.jsx)(eg.Z,{type:"submit",variant:"contained",sx:{width:"100%"},loading:h,children:g("Submit Refund Request")})})})})]})})})})]})})})};eW.propTypes={};let eC=()=>(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",spacing:2,children:[(0,i.jsx)(u.Z,{width:"60px",height:"60px",variant:"rectangle"}),(0,i.jsxs)(g.Z,{alignItems:"flex-start",children:[(0,i.jsx)(u.Z,{width:"100px",variant:"text"}),(0,i.jsx)(u.Z,{width:"100px",variant:"text"})]})]}),eP=e=>{let{t}=e;return(0,i.jsxs)(a.z$,{children:[(0,i.jsxs)(g.Z,{direction:"row",alignItems:"center",spacing:.5,mb:"1rem",children:[(0,i.jsxs)(x.Z,{sx:{fontWeight:"600"},children:[t("Charge Pay By")," :"]}),(0,i.jsx)(u.Z,{width:"100px",variant:"text"})]}),(0,i.jsx)(x.Z,{sx:{fontWeight:"600"},align:"left",children:t("Sender Details")}),(0,i.jsx)(u.Z,{width:"100px",variant:"text"}),(0,i.jsx)(u.Z,{width:"100px",variant:"text"}),(0,i.jsx)(u.Z,{width:"100px",variant:"text"}),(0,i.jsx)(x.Z,{sx:{fontWeight:"600"},align:"left",mt:"0.5rem",children:t("Receiver Details")}),(0,i.jsx)(u.Z,{width:"100px",variant:"text"}),(0,i.jsx)(u.Z,{width:"100px",variant:"text"}),(0,i.jsx)(u.Z,{width:"100px",variant:"text"})]})},ek=e=>{var t,n,r,l,s,h,p,Z,w,b,y;let{configData:C,data:P,trackOrderData:k,id:I,refetchTrackOrder:S,refetch:D}=e,{t:T}=(0,m.$G)(),X=(0,E.u)(),[z,O]=(0,d.useState)(!1);return(0,i.jsxs)(o.Xw,{alignItems:"center",justifyContent:"center",mb:"2rem",spacing:2,children:[(0,i.jsx)(j,{data:P,t:T}),(0,i.jsx)(o.iD,{children:(0,i.jsxs)(c.ZP,{container:!0,item:!0,md:12,lg:12,xs:12,spacing:3,children:[(0,i.jsxs)(c.ZP,{item:!0,md:7,children:[(0,i.jsx)(a.cs,{children:(0,i.jsxs)(a.z$,{container:!0,md:12,xs:12,children:[(0,i.jsxs)(c.ZP,{item:!0,md:5,xs:12,children:[(0,i.jsx)(x.Z,{sx:{fontWeight:"600"},align:"left",children:T("Payment method")}),P?(0,i.jsx)(x.Z,{sx:{fontWeight:"700",color:e=>e.palette.primary.main,textTransform:"capitalize"},align:"left",children:P&&(null==P?void 0:P.payment_method.replaceAll("_"," "))}):(0,i.jsx)(u.Z,{width:"100px",variant:"text"}),(0,i.jsxs)(g.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,i.jsxs)(x.Z,{sx:{fontWeight:"500"},align:"left",children:[T("Amount"),":"]}),P?(0,i.jsx)(x.Z,{sx:{fontWeight:"500"},align:"left",children:P&&(0,f.B9)(null==P?void 0:P.order_amount)}):(0,i.jsx)(u.Z,{width:"100px",variant:"text"})]})]}),(0,i.jsxs)(c.ZP,{item:!0,md:7,xs:12,children:[(0,i.jsxs)(g.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,i.jsxs)(x.Z,{sx:{fontWeight:"500"},align:"left",children:[T("Order Status")," :"]}),P?(0,i.jsx)(x.Z,{component:"span",textTransform:"capitalize",color:X.palette.info.dark,align:"left",children:P&&(null==P?void 0:P.order_status).replaceAll("_"," ")}):(0,i.jsx)(u.Z,{width:"100px",variant:"text"})]}),(0,i.jsxs)(x.Z,{sx:{fontWeight:"500"},align:"left",children:[T("Payment Status")," :"," ",P&&(null==P?void 0:P.payment_status)==="paid"?(0,i.jsx)("span",{style:{color:X.palette.primary.main},children:T("Paid")}):(0,i.jsx)("span",{style:{color:"red"},children:T("Unpaid")})]})]}),(0,i.jsx)(W,{trackOrderData:k,configData:C,t:T})]})}),P?(0,i.jsxs)(a.z$,{children:[(0,i.jsxs)(g.Z,{direction:"row",alignItems:"center",spacing:.5,mb:"1rem",children:[(0,i.jsxs)(x.Z,{sx:{fontWeight:"600"},children:[T("Charge Pay By")," :"]}),(0,i.jsx)(x.Z,{sx:{fontWeight:"600"},color:"primary.main",textTransform:"capitalize",children:null==P?void 0:P.charge_payer})]}),(0,i.jsx)(x.Z,{sx:{fontWeight:"600"},align:"left",children:T("Sender Details")}),(0,i.jsx)(x.Z,{sx:{fontWeight:"600"},color:"primary.main",textTransform:"capitalize",children:null==P?void 0:null===(t=P.delivery_address)||void 0===t?void 0:t.contact_person_name}),(0,i.jsx)(x.Z,{children:null==P?void 0:null===(n=P.delivery_address)||void 0===n?void 0:n.address}),(0,i.jsx)(x.Z,{children:null==P?void 0:null===(r=P.delivery_address)||void 0===r?void 0:r.contact_person_number}),(0,i.jsx)(x.Z,{sx:{fontWeight:"600"},align:"left",mt:"0.5rem",children:T("Receiver Details")}),(0,i.jsx)(x.Z,{sx:{fontWeight:"600"},color:"primary.main",textTransform:"capitalize",children:(null==P?void 0:null===(l=P.receiver_details)||void 0===l?void 0:l.contact_person_name)||"-"}),(0,i.jsx)(x.Z,{children:(null==P?void 0:null===(s=P.receiver_details)||void 0===s?void 0:s.address)||"-"}),(0,i.jsx)(x.Z,{children:(null==P?void 0:null===(h=P.receiver_details)||void 0===h?void 0:h.contact_person_number)||"-"})]}):(0,i.jsx)(eP,{t:T})]}),(0,i.jsxs)(c.ZP,{item:!0,md:5,xs:12,align:"center",children:[(0,i.jsx)(x.Z,{fontWeight:"bold",children:T("Parcel Order Summery")}),(0,i.jsxs)(o.Xw,{alignItems:"flex-start",children:[(0,i.jsx)(x.Z,{fontWeight:"bold",children:T("Parcel Category")}),P?(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",spacing:2,children:[(0,i.jsx)(_.Z,{width:"60px",height:"60px",src:"".concat(null==C?void 0:null===(p=C.base_urls)||void 0===p?void 0:p.parcel_category_image_url,"/").concat(null==P?void 0:null===(Z=P.parcel_category)||void 0===Z?void 0:Z.image),alt:null==P?void 0:null===(w=P.parcel_category)||void 0===w?void 0:w.name}),(0,i.jsxs)(g.Z,{alignItems:"flex-start",children:[(0,i.jsx)(x.Z,{children:null==P?void 0:null===(b=P.parcel_category)||void 0===b?void 0:b.name}),(0,i.jsx)(x.Z,{children:null==P?void 0:null===(y=P.parcel_category)||void 0===y?void 0:y.description})]})]}):(0,i.jsx)(eC,{}),(0,i.jsx)(g.Z,{width:"100%",sx:{mt:"10px",borderBottom:e=>"2px solid ".concat(e.palette.neutral[300])}}),(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,i.jsx)(x.Z,{fontWeight:"bold",color:"primary.main",children:T("Total Amount")}),P?(0,i.jsx)(x.Z,{fontWeight:"bold",children:P&&(0,f.B9)(null==P?void 0:P.order_amount)}):(0,i.jsx)(u.Z,{width:"100px",variant:"text"})]})]})]})]})}),k&&((null==k?void 0:k.order_status)==="confirmed"||(null==k?void 0:k.order_status)==="pending")&&(0,i.jsx)(v.Z,{sx:{marginTop:"1rem"},width:"100%",children:(0,i.jsx)(ea,{id:I,refetchOrderDetails:D,refetchTrackData:S,trackData:k})}),k&&(null==k?void 0:k.order_status)==="failed"&&(0,i.jsx)(eh,{id:I,refetchOrderDetails:D,refetchTrackData:S,trackData:k}),(0,i.jsx)(eW,{open:z,onClose:()=>O(!1)})]})};ek.propTypes={};let eI=e=>{var t,n,r,l,s;let{data:d,trackData:c}=e,{t:j}=(0,m.$G)();return(0,i.jsx)(a.S,{children:(0,i.jsxs)(o.Xw,{alignItems:"center",justifyContent:"center",children:[d?(0,i.jsxs)(x.Z,{sx:{color:"primary.main",fontSize:"36px",fontWeight:"600"},children:[j("Order")," # ",(null==d?void 0:null===(t=d[0])||void 0===t?void 0:t.order_id)?null==d?void 0:null===(n=d[0])||void 0===n?void 0:n.order_id:null==d?void 0:d.id]}):(0,i.jsx)(u.Z,{variant:"text",width:"200px",height:"50px"}),d?(0,i.jsxs)(h.ZT,{sx:{color:e=>e.palette.neutral[400]},children:[j("Order placed")," :"," ",(0,i.jsx)(p.Z,{date:null==d?void 0:null===(r=d[0])||void 0===r?void 0:r.created_at})]}):(0,i.jsx)(u.Z,{variant:"text",width:"240px",height:"20px"}),(null==c?void 0:null===(l=c.data)||void 0===l?void 0:l.scheduled)===1&&(0,i.jsxs)(h.ZT,{children:[j("Order scheduled")," :",(0,i.jsx)(p.Z,{date:null==c?void 0:null===(s=c.data)||void 0===s?void 0:s.schedule_at})]})]})})};var eS=n(76714),eD=n(50594);let eT=e=>{var t,n;let{data:r,trackOrderData:l}=e,{configData:s}=(0,Z.v9)(e=>e.configData),[a,c]=(0,d.useState)(!1),[u,h]=(0,d.useState)(null),p=e=>{h(e),c(!0)},m=e=>{c(e),h(null)};return(0,i.jsxs)(o.Xw,{sx:{padding:"7px 0px 20px 0px"},spacing:2,children:[(0,i.jsx)(x.Z,{variant:"h6",children:(0,et.t)("Prescription")}),(0,i.jsxs)(g.Z,{height:"270px",justifyContent:"space-between",children:[(0,i.jsx)(g.Z,{direction:"row",gap:"10px",flexWrap:"wrap",children:null==r?void 0:null===(t=r.order_attachment)||void 0===t?void 0:t.map((e,t)=>{var n;return(0,i.jsx)(g.Z,{onClick:()=>p(e),sx:{cursor:"pointer"},children:(0,i.jsx)(_.Z,{src:"".concat(null==s?void 0:null===(n=s.base_urls)||void 0===n?void 0:n.order_attachment_url,"/").concat(e),width:"80px"})},t)})}),(0,i.jsxs)(g.Z,{width:"100%",marginTop:"auto",children:[(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,i.jsx)(x.Z,{fontWeight:"bold",children:(0,et.t)("Item Price")}),(0,i.jsx)(x.Z,{fontWeight:"bold",children:l&&(0,f.B9)((null==l?void 0:l.order_amount)+(null==l?void 0:l.store_discount_amount)-(null==l?void 0:l.coupon_discount_amount)-(null==l?void 0:l.total_tax_amount)-(null==l?void 0:l.dm_tips)-(null==l?void 0:l.delivery_charge))})]}),(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,i.jsx)(x.Z,{fontWeight:"bold",children:(0,et.t)("Discount")}),(0,i.jsxs)(x.Z,{fontWeight:"bold",children:["(-) ",l&&(0,f.B9)(null==l?void 0:l.store_discount_amount)]})]}),(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,i.jsx)(x.Z,{fontWeight:"bold",children:(0,et.t)("Coupon discount")}),(0,i.jsxs)(x.Z,{fontWeight:"bold",children:["(+) ",l&&(0,f.B9)(null==l?void 0:l.coupon_discount_amount)]})]}),(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,i.jsxs)(x.Z,{fontWeight:"bold",children:[(0,et.t)("Vat/Tax"),(null==l?void 0:l.tax_status)==="included"?"(included)":""]}),(0,i.jsxs)(x.Z,{fontWeight:"bold",children:[(null==l?void 0:l.tax_status)!=="included"&&" (+) ",l&&(0,f.B9)(null==l?void 0:l.total_tax_amount)]})]}),(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,i.jsx)(x.Z,{fontWeight:"bold",children:(0,et.t)("Deliveryman tips")}),(0,i.jsxs)(x.Z,{fontWeight:"bold",children:["(+) ",l&&(0,f.B9)(null==l?void 0:l.dm_tips)]})]}),(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,i.jsx)(x.Z,{fontWeight:"bold",children:(0,et.t)("Delivery fee")}),(0,i.jsxs)(x.Z,{fontWeight:"bold",children:["(+) ",l&&(0,f.B9)(null==l?void 0:l.delivery_charge)]})]}),(0,i.jsx)(g.Z,{width:"100%",sx:{mt:"20px",mb:"10px",borderBottom:e=>"2px solid ".concat(e.palette.neutral[300])}}),(0,i.jsxs)(o.Xw,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,i.jsx)(x.Z,{fontWeight:"bold",color:"primary.main",children:(0,et.t)("Total")}),(0,i.jsx)(x.Z,{fontWeight:"bold",children:l&&(0,f.B9)(null==l?void 0:l.order_amount)})]})]})]}),(0,i.jsx)(w.Z,{openModal:a,handleClose:m,children:(0,i.jsxs)(g.Z,{position:"relative",children:[(0,i.jsx)("button",{onClick:()=>m(),style:{zIndex:"999",position:"absolute",right:0,cursor:"pointer",border:"none",borderRadius:"50%",width:" 2rem",height:"2rem"},children:(0,i.jsx)(eD.Z,{sx:{fontSize:"16px"}})}),(0,i.jsx)(_.Z,{src:"".concat(null==s?void 0:null===(n=s.base_urls)||void 0===n?void 0:n.order_attachment_url,"/").concat(u),width:"600px",smWidth:"300px",objectfit:"contain"})]})})]})},eX=async e=>{let{customer_reason:t,identity_image:n,id:i,customer_note:r}=e,l=new FormData;l.append("customer_reason",t),l.append("customer_note",r),l.append("order_id",i),n.forEach(e=>{l.append("image[]",e)});let{data:s}=await G.Z.post("/api/v1/customer/order/refund-request",l);return s},ez=()=>(0,Q.useMutation)("refund_request",eX),eO=e=>{var t,n;let{title:r,attachment:l,configData:s}=e,[a,c]=(0,d.useState)(!1),u=e=>{c(!0)};return(0,i.jsxs)(o.Xw,{alignItems:"flex-start",spacing:2,mt:"1rem",children:[(0,i.jsx)(x.Z,{variant:"h6",children:(0,et.t)(r)}),(0,i.jsx)(g.Z,{onClick:()=>u(l),sx:{cursor:"pointer"},children:(0,i.jsx)(_.Z,{src:"".concat(null==s?void 0:null===(t=s.base_urls)||void 0===t?void 0:t.order_attachment_url,"/").concat(l),width:"100px",height:"100px",objectfit:"cover"})}),(0,i.jsx)(w.Z,{openModal:a,handleClose:()=>c(!1),children:(0,i.jsxs)(g.Z,{position:"relative",children:[(0,i.jsx)("button",{onClick:()=>c(!1),style:{zIndex:"999",position:"absolute",right:0,cursor:"pointer",border:"none",borderRadius:"50%",width:" 2rem",height:"2rem"},children:(0,i.jsx)(eD.Z,{sx:{fontSize:"16px"}})}),(0,i.jsx)(_.Z,{src:"".concat(null==s?void 0:null===(n=s.base_urls)||void 0===n?void 0:n.order_attachment_url,"/").concat(l),width:"600px",smWidth:"300px",objectfit:"contain"})]})})]})};eO.propTypes={};let eB=e=>{var t;let{configData:n,data:r,refetch:l}=e,[s,h]=(0,d.useState)(!1),p=(0,N.useRouter)(),{t:j}=(0,m.$G)(),{id:Z}=p.query,_=(0,E.u)(),{refetch:w,data:b}=(0,M.Z)(Z);(0,d.useEffect)(()=>{w()},[]);let{mutate:y,isLoading:C}=ez(),P=e=>{let t={...e,id:Z},n=async e=>{e&&(await w(),$.Am.success(e.message),h(!1))};y(t,{onSuccess:n,onError:U.R})};return(0,i.jsxs)(o.Xw,{alignItems:"center",justifyContent:"center",mb:"2rem",spacing:2,children:[(0,i.jsx)(eI,{data:r,trackData:b}),(0,i.jsx)(o.iD,{children:(0,i.jsxs)(c.ZP,{container:!0,item:!0,md:12,lg:12,xs:12,spacing:3,children:[(0,i.jsxs)(c.ZP,{item:!0,md:7,children:[(0,i.jsx)(a.cs,{children:(0,i.jsxs)(a.z$,{container:!0,md:12,xs:12,children:[(0,i.jsxs)(c.ZP,{item:!0,md:5,xs:12,children:[(0,i.jsx)(x.Z,{sx:{fontWeight:"600"},align:"left",children:j("Payment method")}),b?(0,i.jsx)(x.Z,{sx:{fontWeight:"700",color:e=>e.palette.primary.main,textTransform:"capitalize"},align:"left",children:b&&j(null==b?void 0:b.payment_method.replaceAll("_"," "))}):(0,i.jsx)(u.Z,{width:"100px",variant:"text"}),(0,i.jsxs)(g.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,i.jsxs)(x.Z,{sx:{fontWeight:"500"},align:"left",children:[j("Amount"),":"]}),b?(0,i.jsx)(x.Z,{sx:{fontWeight:"500"},align:"left",children:b&&(0,f.B9)(null==b?void 0:b.order_amount)}):(0,i.jsx)(u.Z,{width:"100px",variant:"text"})]})]}),(0,i.jsxs)(c.ZP,{item:!0,md:7,xs:12,children:[(0,i.jsxs)(g.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,i.jsxs)(x.Z,{sx:{fontWeight:"500"},align:"left",children:[j("Order Status")," :"]}),b?(0,i.jsx)(x.Z,{component:"span",textTransform:"capitalize",color:_.palette.info.dark,align:"left",children:b&&j((null==b?void 0:b.order_status).replaceAll("_"," "))}):(0,i.jsx)(u.Z,{width:"100px",variant:"text"})]}),b&&(null==b?void 0:b.order_status)==="canceled"&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(g.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,i.jsxs)(x.Z,{sx:{fontWeight:"500"},align:"left",children:[j("Cancelled By")," :"]}),b?(0,i.jsx)(x.Z,{component:"span",textTransform:"capitalize",color:_.palette.info.dark,align:"left",children:null==b?void 0:b.canceled_by}):(0,i.jsx)(u.Z,{width:"100px",variant:"text"})]}),(0,i.jsxs)(g.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,i.jsxs)(x.Z,{sx:{fontWeight:"500"},align:"left",children:[j("Cancellation Reason")," :"]}),b?(0,i.jsx)(x.Z,{component:"span",textTransform:"capitalize",color:_.palette.info.dark,align:"left",children:null==b?void 0:b.cancellation_reason}):(0,i.jsx)(u.Z,{width:"100px",variant:"text"})]})]}),(0,i.jsxs)(x.Z,{sx:{fontWeight:"500"},align:"left",children:[j("Payment Status")," :"," ",b&&(null==b?void 0:b.payment_status)==="paid"?(0,i.jsx)("span",{style:{color:_.palette.success.light},children:j("Paid")}):(0,i.jsx)("span",{style:{color:"red"},children:j("Unpaid")})]})]}),(0,i.jsxs)(c.ZP,{item:!0,xs:12,children:[b&&(null==b?void 0:b.module_type)==="food"&&(null==b?void 0:b.cutlery)&&(0,i.jsxs)(g.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,i.jsxs)(x.Z,{sx:{fontWeight:"500"},align:"left",children:[j("Cutlery")," :"]}),b?(0,i.jsx)(x.Z,{component:"span",textTransform:"capitalize",align:"left",children:j("Yes")}):(0,i.jsx)(u.Z,{width:"100px",variant:"text"})]}),b&&(null==b?void 0:b.delivery_instruction)&&(0,i.jsxs)(g.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,i.jsxs)(x.Z,{sx:{fontWeight:"500"},align:"left",children:[j("Delivery instruction")," :"]}),b?(0,i.jsx)(x.Z,{component:"span",textTransform:"capitalize",align:"left",children:j(null==b?void 0:b.delivery_instruction)}):(0,i.jsx)(u.Z,{width:"100px",variant:"text"})]}),b&&(null==b?void 0:b.unavailable_item_note)&&(0,i.jsxs)(g.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,i.jsxs)(x.Z,{sx:{fontWeight:"500"},align:"left",children:[j("Unavailable item note")," :"]}),b?(0,i.jsx)(x.Z,{component:"span",align:"left",children:j(null==b?void 0:b.unavailable_item_note)}):(0,i.jsx)(u.Z,{width:"100px",variant:"text"})]})]}),(0,i.jsx)(W,{trackOrderData:b,configData:n,t:j}),!(null==r?void 0:r.prescription_order)&&(null==b?void 0:b.module_type)==="pharmacy"&&(null==b?void 0:b.order_attachment)&&(0,i.jsx)(eO,{title:"Prescription",attachment:null==b?void 0:b.order_attachment,configData:n})]})}),b?(0,i.jsx)(S,{trackOrderData:b,configData:n,t:j}):(0,i.jsx)(u.Z,{variant:"text",width:"100%",height:"250px"})]}),(0,i.jsx)(c.ZP,{item:!0,md:5,xs:12,children:(null==r?void 0:r.prescription_order)?(0,i.jsx)(eT,{data:r,trackOrderData:b}):b&&(0,i.jsx)(F,{trackOrderData:b,configData:n,t:j,data:r})})]})}),r&&!(null==r?void 0:null===(t=r[0])||void 0===t?void 0:t.item_campaign_id)&&b&&(null==b?void 0:b.order_status)==="delivered"&&(0,i.jsx)(o.iD,{children:(0,i.jsxs)(c.ZP,{container:!0,spacing:1,children:[(0,i.jsx)(c.ZP,{item:!0,xs:12,sm:12,md:(null==n?void 0:n.refund_active_status)?6:12,children:(0,i.jsx)(k(),{href:"/rate-and-review/".concat(Z),children:(0,i.jsx)(eS.KM,{variant:"contained",sx:{width:"100%"},children:j("Give a review")})})}),(null==n?void 0:n.refund_active_status)&&(0,i.jsx)(c.ZP,{item:!0,xs:12,sm:12,md:6,children:(0,i.jsx)(q.Z,{variant:"outlined",sx:{width:"100%",color:e=>e.palette.primary.main},onClick:()=>h(!0),children:j("Refund Request")})})]})}),b&&((null==b?void 0:b.order_status)==="confirmed"||(null==b?void 0:b.order_status)==="accepted"||(null==b?void 0:b.order_status)==="picked_up"||(null==b?void 0:b.order_status)==="pending"||(null==b?void 0:b.order_status)==="processing"||(null==b?void 0:b.order_status)==="handover")&&(0,i.jsx)(v.Z,{sx:{marginTop:"1rem"},width:"100%",children:(0,i.jsx)(ea,{id:Z,refetchOrderDetails:l,refetchTrackData:w,trackData:b})}),b&&(null==b?void 0:b.order_status)==="failed"&&(0,i.jsx)(eh,{id:Z,refetchOrderDetails:l,refetchTrackData:w,trackData:b}),(0,i.jsx)(eW,{open:s,onClose:()=>h(!1),formSubmit:P})]})};eB.propTypes={};var eR=n(19545);let eA=e=>{let{configData:t}=e,n=(0,N.useRouter)(),{id:r}=n.query,{refetch:l,data:s,isRefetching:o}=(0,eR.Z)(r),{refetch:a,data:c}=(0,M.Z)(r);return(0,d.useEffect)(()=>{l(),a()},[r]),(0,i.jsx)("div",{children:!o&&s&&"parcel"===s.module_type?(0,i.jsx)(ek,{configData:t,data:s,trackOrderData:c,id:r,refetch:l,refetchTrackOrder:a}):(0,i.jsx)(eB,{configData:t,data:s,refetch:l})})};eA.propTypes={};let eF=e=>{let{configData:t,landingPageData:n}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.ZP,{}),(0,i.jsx)(l.default,{title:"Order details - ".concat(null==t?void 0:t.business_name)}),(0,i.jsx)(s.Z,{configData:t,landingPageData:n,children:(0,i.jsx)(eA,{configData:t})})]})};var eE=!0,eM=eF},80591:function(e,t,n){"use strict";n.d(t,{B:function(){return d}});var i=n(88767),r=n(61176),l=n(67759);let s=async()=>{let{data:e}=await r.Z.get("api/v1/customer/order/cancellation-reasons?offset=1&limit=10&type=customer");return e},d=()=>(0,i.useQuery)("cancel-reasons",()=>s(),{enabled:!1,onError:l.f})},19545:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(61176),r=n(60274),l=n(88767),s=n(67759);let d=async e=>{let{data:t}=await i.Z.get("".concat(r.WH,"?order_id=").concat(e));return t};function o(e){return(0,l.useQuery)("order-details",()=>d(e),{enabled:!1,onError:s.f})}},24073:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(61176),r=n(60274),l=n(88767),s=n(67759);let d=async e=>{let{data:t}=await i.Z.get("".concat(r.NP,"?order_id=").concat(e));return t};function o(e){return(0,l.useQuery)("track-order-data",()=>d(e),{enabled:!1,onError:s.f})}},73369:function(e,t,n){"use strict";var i=n(85893);n(67294);var r=n(50594),l=n(58861),s=n(45269),d=n(62097);let o=e=>{(0,d.Z)();let{modalImage:t,handleModalClose:n}=e;return(0,i.jsxs)(s.Xw,{sx:{position:"relative",width:{xs:"270px",sm:"500px"}},alignItems:"flex-end",children:[(0,i.jsx)("button",{onClick:()=>n(!1),style:{cursor:"pointer",border:"none",borderRadius:"50%",width:" 2rem",height:"2rem"},children:(0,i.jsx)(r.Z,{sx:{fontSize:"16px"}})}),(0,i.jsx)(l.Z,{src:t,width:"100%",height:"100%"})]})};o.propTypes={},t.Z=o},17446:function(e,t,n){"use strict";n(67294);var i=n(9473),r=n(30381),l=n.n(r);let s=e=>{let{date:t}=e,{configData:n}=(0,i.v9)(e=>e.configData);return"12"===(null==n?void 0:n.timeformat)?l()(t).format("ll hh:mm a"):l()(t).format("ll HH:mm")};t.Z=s},30700:function(e,t,n){"use strict";n.d(t,{CD:function(){return h},Ih:function(){return x},S:function(){return m},To:function(){return p},UW:function(){return u},cs:function(){return j},d$:function(){return c},f1:function(){return a},vY:function(){return v},z$:function(){return g}});var i=n(81719),r=n(29630),l=n(54225),s=n(79072),d=n(41796),o=n(18377);let a=(0,i.ZP)(r.Z)(e=>{let{theme:t}=e;return{[t.breakpoints.up("xs")]:{fontSize:"14px"},[t.breakpoints.up("md")]:{fontSize:"22px"}}}),c=(0,i.ZP)(r.Z)(e=>{let{theme:t}=e;return{color:t.palette.text.secondary,[t.breakpoints.up("xs")]:{fontSize:"12px"},[t.breakpoints.up("md")]:{fontSize:"16px"}}}),x=(0,i.ZP)(r.Z)(e=>{let{theme:t}=e;return{[t.breakpoints.up("xs")]:{fontSize:"12px"},[t.breakpoints.up("md")]:{fontSize:"16px"}}}),u=(0,i.ZP)(l.Z)(e=>{let{theme:t}=e;return{background:"rgba(0, 171, 17, 0.1);",color:t.palette.success.main,borderRadius:"5px",[t.breakpoints.up("xs")]:{width:"59.68px",height:"20.56px",fontSize:"12px"},[t.breakpoints.up("md")]:{width:"88px",height:"30px",fontSize:"14px"}}}),h=(0,i.ZP)(o.Z)(e=>{let{theme:t}=e;return{textAlign:"center",textTransform:"capitalize",background:"rgba(0, 95, 149, 0.1)",color:t.palette.info.dark,borderRadius:"5px",padding:"5px",width:"auto",[t.breakpoints.down("md")]:{maxWidth:"100px"},[t.breakpoints.up("xs")]:{fontSize:"12px"},[t.breakpoints.up("md")]:{fontSize:"16px"}}}),p=(0,i.ZP)(l.Z)(e=>{let{theme:t}=e;return{width:"100%",height:"32px",background:t.palette.primary.main,border:"1px solid rgba(239, 120, 34, 0.3)",borderRadius:"5px",color:"white",gap:"5px","&:hover":{backgroundColor:t.palette.primary.dark},[t.breakpoints.up("md")]:{width:"150px",height:"32px",fontSize:"16px"}}}),m=(0,i.ZP)(o.Z)(()=>({padding:"10px 0px 20px 0px"})),j=(0,i.ZP)(o.Z)(e=>{let{theme:t}=e;return{padding:"7px 0px 20px 0px",[t.breakpoints.up("xs")]:{textAlign:"center"}}}),g=(0,i.ZP)(s.ZP)(e=>{let{theme:t}=e;return{background:t.palette.neutral[300],borderRadius:"14px",padding:"20px",rowGap:"10px"}}),v=(0,i.ZP)(s.ZP)(e=>{let{theme:t}=e;return{background:(0,d.Fq)(t.palette.primary.main,.1),borderRadius:"14px",padding:"20px"}})},48746:function(e,t,n){"use strict";var i=n(85893),r=n(67294),l=n(77745),s=n(29630),d=n(51126),o=n(95398),a=n(22841),c=n(41470),x=n(55343),u=n(8519),h=n(76779),p=n(9144),m=n(54225),j=n(31812),g=n(87086),v=n(45269);let f=e=>{var t,n;let{cancelReason:f,orderLoading:Z,setCancelReason:_,cancelReasonsData:w,setModalOpen:b,handleOnSuccess:y}=e,[W,C]=(0,r.useState)(),P=e=>{_(e.target.value)},k=()=>{b(!1)};return(0,i.jsx)(g.f,{width:"22rem",children:(0,i.jsxs)(v.Xw,{spacing:1,children:[(0,i.jsx)(l.Z,{id:"alert-dialog-title",sx:{padding:"10px 24px"},children:(0,i.jsx)(s.Z,{textAlign:"center",variant:"h6",children:(0,d.t)("What’s Wrong With This Order?")})}),(0,i.jsx)(o.Z,{sx:{padding:"10px 24px"},children:(0,i.jsx)(v.Xw,{children:(0,i.jsxs)(x.Z,{component:"fieldset",children:[(0,i.jsx)(s.Z,{fontWeight:"600",variant:"h6",paddingY:".5rem",children:(0,d.t)("Cancel Reason")}),(0,i.jsx)(c.Z,{"aria-label":"gender",name:"gender1",value:f,onChange:P,children:w&&(null==w?void 0:null===(t=w.data)||void 0===t?void 0:t.length)>0&&(null==w?void 0:null===(n=w.data)||void 0===n?void 0:n.map(e=>(0,i.jsx)(a.Z,{value:e.reason,checked:e.reason==f&&f,editable:!0,control:(0,i.jsx)(u.Z,{}),label:e.reason},null==e?void 0:e.id)))})]})})}),(0,i.jsx)(h.Z,{sx:{paddingX:"20px"},children:(0,i.jsxs)(p.Z,{direction:"row",alignItems:"center",justifyContent:"center",width:"100%",spacing:2,children:[(0,i.jsx)(m.Z,{variant:"contained",onClick:k,sx:{width:"100%",backgroundColor:e=>e.palette.neutral[300],color:e=>e.palette.neutral[1e3],"&:hover":{backgroundColor:e=>e.palette.neutral[400]}},children:(0,d.t)("Back")}),(0,i.jsx)(j.Z,{loading:Z,onClick:y,variant:"contained",sx:{width:"100%"},children:(0,d.t)("Submit")})]})})]})})};t.Z=f}},function(e){e.O(0,[1255,2506,6454,5269,580,7851,8672,9774,2888,179],function(){return e(e.s=31887)}),_N_E=e.O()}]);